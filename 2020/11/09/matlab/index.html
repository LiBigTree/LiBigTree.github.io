<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>matlab - 长夜未央</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="test1"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="test1"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="本篇内容是我用matlab学习图像处理的记录 Q:how to improve my coding force level A:我会找个教程&amp;#x2F;文档例子，把代码逐行敲一遍，感觉就像是我自己写的一样，一旦完成，我会从头重写一遍，添加注释，并根据自己的用例修改它。"><meta property="og:type" content="blog"><meta property="og:title" content="matlab"><meta property="og:url" content="lider7214.cn/2020/11/09/matlab/"><meta property="og:site_name" content="长夜未央"><meta property="og:description" content="本篇内容是我用matlab学习图像处理的记录 Q:how to improve my coding force level A:我会找个教程&amp;#x2F;文档例子，把代码逐行敲一遍，感觉就像是我自己写的一样，一旦完成，我会从头重写一遍，添加注释，并根据自己的用例修改它。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="/img/matlab/matlab001_%E7%95%8C%E9%9D%A2.png"><meta property="og:image" content="/img/matlab/matlab002_figure1.png"><meta property="og:image" content="/img/matlab/matlab003_variable.png"><meta property="og:image" content="/img/matlab/matlab004_current_folder.png"><meta property="og:image" content="/img/matlab/matlab004_%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png"><meta property="og:image" content="/img/matlab/matlab005_variable_spaces.jpg"><meta property="og:image" content="/img/matlab/matlab006_plot1.png"><meta property="og:image" content="/img/matlab/matlab007_plot2.png"><meta property="og:image" content="/img/matlab/matlab008_plot3.png"><meta property="og:image" content="/img/matlab/matlab009_plot4.png"><meta property="og:image" content="/img/matlab/matlab010_plot5.png"><meta property="og:image" content="/img/matlab/matlab011_plot6.png"><meta property="og:image" content="/img/matlab/matlab012_plot7.png"><meta property="og:image" content="/img/matlab/matlab013_plot8.png"><meta property="article:published_time" content="2020-11-09T06:27:32.000Z"><meta property="article:modified_time" content="2020-11-09T13:48:47.234Z"><meta property="article:author" content="Lider"><meta property="article:tag" content="coding matlab与图像处理"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/matlab/matlab001_%E7%95%8C%E9%9D%A2.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"lider7214.cn/2020/11/09/matlab/"},"headline":"长夜未央","image":["/img/matlab/matlab001_%E7%95%8C%E9%9D%A2.png","/img/matlab/matlab002_figure1.png","/img/matlab/matlab003_variable.png","/img/matlab/matlab004_current_folder.png","/img/matlab/matlab004_%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png","/img/matlab/matlab005_variable_spaces.jpg","/img/matlab/matlab006_plot1.png","/img/matlab/matlab007_plot2.png","/img/matlab/matlab008_plot3.png","/img/matlab/matlab009_plot4.png","/img/matlab/matlab010_plot5.png","/img/matlab/matlab011_plot6.png","/img/matlab/matlab012_plot7.png","/img/matlab/matlab013_plot8.png"],"datePublished":"2020-11-09T06:27:32.000Z","dateModified":"2020-11-09T13:48:47.234Z","author":{"@type":"Person","name":"Lider"},"description":"本篇内容是我用matlab学习图像处理的记录 Q:how to improve my coding force level A:我会找个教程&#x2F;文档例子，把代码逐行敲一遍，感觉就像是我自己写的一样，一旦完成，我会从头重写一遍，添加注释，并根据自己的用例修改它。"}</script><link rel="canonical" href="lider7214.cn/2020/11/09/matlab/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?5a8d2d47f84bcec8724f075dc6c2565f";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><meta name="msvalidate.01" content="BC710780EACEE1790CD67974775D934D"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><meta name="generator" content="Hexo 5.0.2"><link rel="alternate" href="/atom.xml" title="长夜未央" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">修炼理工解构的能力</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-11-09T06:27:32.000Z" title="2020-11-09T06:27:32.000Z">2020-11-09</time>发表</span><span class="level-item"><time dateTime="2020-11-09T13:48:47.234Z" title="2020-11-09T13:48:47.234Z">2020-11-09</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E7%BC%96%E7%A8%8B-matlab/">编程 matlab</a></span><span class="level-item">2 小时读完 (大约14432个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">matlab</h1><div class="content"><p>本篇内容是我用matlab学习图像处理的记录</p>
<p>Q:how to improve my coding force level</p>
<p>A:我会找个教程/文档例子，把代码逐行敲一遍，感觉就像是我自己写的一样，一旦完成，我会从头重写一遍，添加注释，并根据自己的用例修改它。</p>
<a id="more"></a>

<p><strong>结合右侧的目录学习体验会更好</strong></p>
<h1 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h1><h2 id="matlab界面"><a href="#matlab界面" class="headerlink" title="matlab界面"></a>matlab界面</h2><p><img src="/img/matlab/matlab001_%E7%95%8C%E9%9D%A2.png" alt="matlab界面"></p>
<p>我们常规见到的界面应该包括在如图的6个窗口中：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">1、命令行窗口：这是MATLAB运行命令的主要位置</span><br><span class="line">2、编辑器：编程工作区</span><br><span class="line">3、菜单栏：常规功能</span><br><span class="line">4、变量：显示变量的具体内容</span><br><span class="line">5、当前文件夹&amp;详细信息：这两个是分不开的</span><br><span class="line">6、工作区：显示了当前工作状态下的所有变量</span><br></pre></td></tr></table></figure>

<h3 id="命令行窗口"><a href="#命令行窗口" class="headerlink" title="命令行窗口"></a>命令行窗口</h3><p>命令行窗口可以快速运行一些计算或执行命令。当出现提示光标&gt;&gt;时，即代表命令行准备就绪</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; <span class="number">1</span>+<span class="number">2</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">     <span class="number">3</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; </span><br><span class="line"></span><br><span class="line">使用命令行窗口还有一个非常好用的小trick，那就是在命令行准备就绪时，可以使用上方向键直接调取历史命令。而如果你已经输入了一些内容，则会调取与你输入内容开头相匹配的命令。</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="编辑器"><a href="#编辑器" class="headerlink" title="编辑器"></a>编辑器</h3><p>我们总是希望编写完程序后可以自动运行，而不是每次都手动输入命令。在编辑器中，我们可以编辑脚本文件或函数文件，其语法与命令行相同。</p>
<h3 id="菜单栏"><a href="#菜单栏" class="headerlink" title="菜单栏"></a>菜单栏</h3><p>菜单栏覆盖了几乎所有的初学MATLAB的操作。例如，我们点击菜单栏中的“主页”-&gt;“新建脚本”，将会自动跳转到新的脚本界面。我们编辑以下脚本内容：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 绘制y=x^2的图像</span></span><br><span class="line">a = <span class="number">1</span>:<span class="number">10</span>;</span><br><span class="line">b = a.^<span class="number">2</span>;</span><br><span class="line"><span class="built_in">plot</span>(a,b);</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>点击菜单栏中“编辑器”-&gt;“保存”，将脚本文件命名为“Script2_1.m”将结果直接保存至当前文件夹。再次点击<br>“运行”，即可出现下图所示结果。<br><img src="/img/matlab/matlab002_figure1.png" alt="figure"></p>
<h3 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h3><p>运行完刚刚的程序，可以看到我们的工作区中目前有a，ans，b三个变量。我们双击a变量，即可打开变量窗口。可以看到下图所示的内容。<br><img src="/img/matlab/matlab003_variable.png" alt="variable"></p>
<p>“1×10 double”表明该变量的大小为1行×10列，每个元素的类型均为double（双精度浮点数）。以此点击别的变量，我们可以看到对应的变量内容。</p>
<p>需要注意的是，在变量窗口中，变量的值是可以直接被修改的。双击其中的一个元素，即可对元素进行更改。</p>
<h3 id="当前文件夹-amp-详细信息"><a href="#当前文件夹-amp-详细信息" class="headerlink" title="当前文件夹&amp;详细信息"></a>当前文件夹&amp;详细信息</h3><p>同菜单栏下方的地址栏一起，表明你当前的工作位置。正常情况下，当前文件夹中显示的文件夹均为透明，表明这些文件夹处于不可用状态，即不在你的工作区当中。</p>
<p>这两者有什么区别呢？我们在当前文件夹中右键，创建一个新文件夹。接着，我们再次创建一个脚本“Script2_2.m”，并保存至新创建的文件夹下。这时我们在命令行窗口中输入“Script2_1”，可以看到之前编写的程序重新运行。但是我们如果输入“Script2_1”，将会提示“未定义函数或变量 ‘Script2_1’。”这就是因为我们新创建的文件夹并不属于当前工作区导致的。</p>
<p>解决方法就是右击新建的文件夹文件夹，选择“添加到路径”，根据情况选择是否需要添加子文件夹即可。这时我们可以看到，原本透明的文件夹已经变得不透明，其中的脚本文件也可以成功运行。</p>
<p>如果我们选择“Script2_1.m”，可以看到详细信息中出现了“绘制y=x^2的图像”，这正是我们编写脚本时开头的注释。因此这里希望大家养成良好的习惯，在编写脚本时在开头使用注释简单说明程序功能，以方便之后的查找。</p>
<p>PS：在当前文件夹中，可以进行各种常规资源管理器操作，例如复制、粘贴、重命名等。<br><img src="/img/matlab/matlab004_current_folder.png" alt="current folder"></p>
<h3 id="工作区"><a href="#工作区" class="headerlink" title="工作区"></a>工作区</h3><p>工作区显示了当前状态下的所有变量情况，包括名称、值等。左键标题可以进行排序，右键标题即可选择显示的内容，双击变量即可打开变量窗口。</p>
<p>另外，在工作区中选择变量后，按Del键可以删除变量。</p>
<p>如果想快速清除所有变量，可以在命令行中输入clear。</p>
<ul>
<li>当不清楚一个功能时，在命令行窗口输入用 help + 查询函数会有官方解释，（网上查也是一种选择）</li>
<li>有用的函数指令<br>  clc: 清空命令行窗口<br>  clear: 清空工作变量区的所有变量<br>  close all； 关闭建立的所有窗口</li>
</ul>
<h2 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h2><p>接下来我们将学习MATLAB中的各种数据类型，主要包括10种基本数据类型和4种复合数据类型。</p>
<h3 id="基本数据类型"><a href="#基本数据类型" class="headerlink" title="基本数据类型"></a>基本数据类型</h3><p>和一般的编程语言一样，MATLAB的基本数据类型分为两种，即整型(int)和浮点数(float)。其中整形根据其是否包含负数可以进一步分为有符号整形和无符号整形，而浮点数根据其精度不同又可以进一步划分为单精度浮点数和双精度浮点数。下面的表格列出了各种基本数据类型对应的表示范围，这里类型名称沿用了一般编程语言中的名称。</p>
<p>(图像初期用到的基本数据类型是unit8和double类型。)<br><img src="/img/matlab/matlab004_%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B.png" alt="数据类型"></p>
<p>在MATLAB中，不显式指定数据类型的情况下，默认所有的数据类型均为double类型。如果需要创建一个其他类型的变量，只需要加上其符号名即可，例如</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">a = int8(<span class="number">13</span>);        <span class="comment">% 创建一个字节型整数13</span></span><br><span class="line">b = single(<span class="number">25.56</span>);    <span class="comment">% 创建一个单精度浮点数25.56</span></span><br><span class="line">c = <span class="number">-32</span>;        <span class="comment">% 未显式指明数据类型，创建一个双精度浮点数32</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>MATLAB中，有几个特殊的常量，它们分别是：</p>
<pre><code>pi：圆周率π
eps：最小浮点数
Inf：正无穷大，即1/0
NaN：非数，即0/0
i,j：虚数单位</code></pre><h2 id="复合数据类型——矩阵"><a href="#复合数据类型——矩阵" class="headerlink" title="复合数据类型——矩阵"></a>复合数据类型——矩阵</h2><p>类似一般编程语言中的数组，MATLAB中也有很多复合数据类型，可以将众多基本数据类型合并到一起。最为常见的符合数据类型包括矩阵，结构体和元胞矩阵。</p>
<p>矩阵是MATLAB中的基本运算单元，即使是一个数在MATLAB中也是被当做1*1的矩阵看待的。矩阵由若干维度组成，例如0维矩阵表示一个元素，1维矩阵表示一个向量，还有2维、3维甚至更高维的矩阵。在MATLAB中，常规矩阵的最小维度为2维，即一般数学意义上的矩阵，而标量、向量都是矩阵的特例。下面我们将以2维矩阵为例，介绍其生成与运算。</p>
<p>矩阵的生成方式主要包括以下几种方式：</p>
<h3 id="矩阵的生成–直接输入"><a href="#矩阵的生成–直接输入" class="headerlink" title="矩阵的生成–直接输入"></a>矩阵的生成–直接输入</h3><p>利用直接输入的方法，我们可以生成一个矩阵。输入的矩阵用中括号表示，同一行元素之间使用逗号或空格分开，用分号或回车结束一行的输入。例如</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; a = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>; <span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"></span><br><span class="line">a =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span></span><br><span class="line">     <span class="number">4</span>     <span class="number">5</span>     <span class="number">6</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; b = [<span class="number">2</span> <span class="number">3</span> <span class="number">4</span></span><br><span class="line"><span class="number">5</span> <span class="number">6</span> <span class="number">7</span>]</span><br><span class="line"></span><br><span class="line">b =</span><br><span class="line"></span><br><span class="line">     <span class="number">2</span>     <span class="number">3</span>     <span class="number">4</span></span><br><span class="line">     <span class="number">5</span>     <span class="number">6</span>     <span class="number">7</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>当输入的矩阵不指定变量名称时，结果将暂时保存到ans变量中，即</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; [2,3; 3,4]</span><br><span class="line"></span><br><span class="line">ans &#x3D;</span><br><span class="line"></span><br><span class="line">     2     3</span><br><span class="line">     3     4</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>如果没有及时保存结果，ans变量中的内容将会被下一次不指定变量名称的输出结果覆盖。</p>
<h3 id="矩阵的生成–函数生成"><a href="#矩阵的生成–函数生成" class="headerlink" title="矩阵的生成–函数生成"></a>矩阵的生成–函数生成</h3><p>MATLAB中有一些好用的函数，用于构造一些具有特殊性质的矩阵。例如常用的构造函数：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; zeros23 = <span class="built_in">zeros</span>(<span class="number">2</span>,<span class="number">3</span>) <span class="comment">% 生成2*3的零矩阵</span></span><br><span class="line"></span><br><span class="line">zeros23 =</span><br><span class="line"></span><br><span class="line">     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line">     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; ones3 = <span class="built_in">ones</span>(<span class="number">3</span>) <span class="comment">% 生成3*3的全1矩阵，方阵只需要输入行数</span></span><br><span class="line"></span><br><span class="line">ones3 =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">1</span>     <span class="number">1</span></span><br><span class="line">     <span class="number">1</span>     <span class="number">1</span>     <span class="number">1</span></span><br><span class="line">     <span class="number">1</span>     <span class="number">1</span>     <span class="number">1</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; eye32 = <span class="built_in">eye</span>(<span class="number">3</span>,<span class="number">2</span>) <span class="comment">% 生成3*2的单位对角阵</span></span><br><span class="line"></span><br><span class="line">eye32 =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">0</span></span><br><span class="line">     <span class="number">0</span>     <span class="number">1</span></span><br><span class="line">     <span class="number">0</span>     <span class="number">0</span></span><br></pre></td></tr></table></figure>
<p>类似的函数还有rand()（生成随机矩阵）, magic()（生成幻方矩阵）等，大家可以自行尝试。</p>
<h3 id="矩阵计算"><a href="#矩阵计算" class="headerlink" title="矩阵计算"></a>矩阵计算</h3><p>MATLAB中提供了以下的矩阵运算符</p>
<pre><code>+（加法），-（减法），*（乘法），’（转置），\（左除），/（右除），^（乘幂）</code></pre><p>在使用矩阵运算符的过程中，应使得操作矩阵符合矩阵运算性质。例如</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; <span class="built_in">ones</span>(<span class="number">2</span>)^<span class="number">3</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">     <span class="number">4</span>     <span class="number">4</span></span><br><span class="line">     <span class="number">4</span>     <span class="number">4</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="built_in">eye</span>(<span class="number">3</span>,<span class="number">2</span>) * <span class="built_in">eye</span>(<span class="number">2</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line">     <span class="number">0</span>     <span class="number">1</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line">     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; ans&#x27;</span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line">     <span class="number">0</span>     <span class="number">1</span>     <span class="number">0</span></span><br><span class="line">     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line">     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>特别的，当加法、减法和乘法作用于矩阵和标量时，代表对矩阵中每个元素进行对应的处理，例如</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; <span class="built_in">eye</span>(<span class="number">2</span>,<span class="number">3</span>) + <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">     <span class="number">2</span>     <span class="number">1</span>     <span class="number">1</span></span><br><span class="line">     <span class="number">1</span>     <span class="number">2</span>     <span class="number">1</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="number">4.5</span>*<span class="built_in">ones</span>(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">    <span class="number">4.5000</span>    <span class="number">4.5000</span></span><br><span class="line">    <span class="number">4.5000</span>    <span class="number">4.5000</span></span><br></pre></td></tr></table></figure>
<p>另外，对于左除和右除，其用法如下：</p>
<pre><code>设\(A\)为可逆矩阵，\(AX=B\)的解是\(X=A\setminus B\)，\(XA=B\)的解是\(X=B/A\)。</code></pre><p>除此之外，矩阵还有一些特殊的运算，称之为“点”运算，使用较多的包括.*（点乘）和.^（点乘幂）。点运算的特殊之处在于，它不是按照矩阵的运算规律进行计算的，而是对具有相同大小的两矩阵，将对应元素进行乘或乘幂的操作。例如</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] .* [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">     <span class="number">4</span>    <span class="number">10</span>    <span class="number">18</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; [<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>] .^ [<span class="number">4</span>,<span class="number">5</span>,<span class="number">6</span>]</span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>    <span class="number">32</span>   <span class="number">729</span></span><br></pre></td></tr></table></figure>

<h3 id="冒号运算符与矩阵拼接"><a href="#冒号运算符与矩阵拼接" class="headerlink" title="冒号运算符与矩阵拼接"></a>冒号运算符与矩阵拼接</h3><p>在MATLAB中，:（冒号运算符）是非常重要的一个符号，利用冒号可以轻松表示等差数列。例如</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; a = <span class="number">1</span>:<span class="number">5</span> <span class="comment">% 创建从1到5，公差为1（可省略）的等差数组</span></span><br><span class="line"></span><br><span class="line">a =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span>     <span class="number">4</span>     <span class="number">5</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; b = <span class="number">1</span>:<span class="number">3</span>:<span class="number">10</span> <span class="comment">% 创建从1到10，公差为3的等差数组</span></span><br><span class="line"></span><br><span class="line">b =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">4</span>     <span class="number">7</span>    <span class="number">10</span></span><br></pre></td></tr></table></figure>
<p>取出矩阵元素时，我们只需要指定选取的行号与列号即可。请注意，MATLAB中所有下标均从1开始而非从0开始，请一定牢记！！！</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; a = <span class="built_in">magic</span>(<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">a =</span><br><span class="line"></span><br><span class="line">    <span class="number">17</span>    <span class="number">24</span>     <span class="number">1</span>     <span class="number">8</span>    <span class="number">15</span></span><br><span class="line">    <span class="number">23</span>     <span class="number">5</span>     <span class="number">7</span>    <span class="number">14</span>    <span class="number">16</span></span><br><span class="line">     <span class="number">4</span>     <span class="number">6</span>    <span class="number">13</span>    <span class="number">20</span>    <span class="number">22</span></span><br><span class="line">    <span class="number">10</span>    <span class="number">12</span>    <span class="number">19</span>    <span class="number">21</span>     <span class="number">3</span></span><br><span class="line">    <span class="number">11</span>    <span class="number">18</span>    <span class="number">25</span>     <span class="number">2</span>     <span class="number">9</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; a(<span class="number">3</span>,<span class="number">2</span>) <span class="comment">% 选取a的第3行，第2列元素</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">     <span class="number">6</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; a(<span class="number">1</span>:<span class="number">2</span>,<span class="number">2</span>:<span class="number">4</span>) <span class="comment">% 选取a的1~2行，2~4列元素</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">    <span class="number">24</span>     <span class="number">1</span>     <span class="number">8</span></span><br><span class="line">     <span class="number">5</span>     <span class="number">7</span>    <span class="number">14</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; a(<span class="number">2</span>,:) <span class="comment">% 选取a的第2行，所有列元素</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">    <span class="number">23</span>     <span class="number">5</span>     <span class="number">7</span>    <span class="number">14</span>    <span class="number">16</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; a(<span class="number">1</span>:<span class="number">2</span>:<span class="number">5</span>,[<span class="number">2</span>,<span class="number">5</span>]) <span class="comment">% 选取a的第[1,3,5]行，第[2,5]列元素</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">    <span class="number">24</span>    <span class="number">15</span></span><br><span class="line">     <span class="number">6</span>    <span class="number">22</span></span><br><span class="line">    <span class="number">18</span>     <span class="number">9</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; a(<span class="number">3</span>:<span class="keyword">end</span>,<span class="number">4</span>) <span class="comment">% 选取a的第三行到最后一行，第4列元素</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">    <span class="number">20</span></span><br><span class="line">    <span class="number">21</span></span><br><span class="line">     <span class="number">2</span></span><br></pre></td></tr></table></figure>
<p>基于此，我们可以对长度吻合的矩阵进行拼接，例如</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; a = [<span class="number">1</span>:<span class="number">5</span>, <span class="built_in">ones</span>(<span class="number">1</span>,<span class="number">3</span>); <span class="built_in">zeros</span>(<span class="number">2</span>,<span class="number">8</span>)]</span><br><span class="line"></span><br><span class="line">a =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span>     <span class="number">4</span>     <span class="number">5</span>     <span class="number">1</span>     <span class="number">1</span>     <span class="number">1</span></span><br><span class="line">     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line">     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span>     <span class="number">0</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; b = [a(<span class="number">1</span>,<span class="number">1</span>:<span class="number">2</span>:<span class="number">7</span>); <span class="number">4</span>:<span class="number">-0.5</span>:<span class="number">2.5</span>]</span><br><span class="line"></span><br><span class="line">b =</span><br><span class="line"></span><br><span class="line">    <span class="number">1.0000</span>    <span class="number">3.0000</span>    <span class="number">5.0000</span>    <span class="number">1.0000</span></span><br><span class="line">    <span class="number">4.0000</span>    <span class="number">3.5000</span>    <span class="number">3.0000</span>    <span class="number">2.5000</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>除了冒号运算符，还有一种生成等差数列的方式，即使用linspace(a,b,n)函数生成从a到b共n个数值的等差数列。同样的，利用logspace(a,b,n)可以生成从(10^a)到(10^b)共n个数值的等比数列。例如</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; a = <span class="built_in">linspace</span>(<span class="number">0</span>,<span class="built_in">pi</span>,<span class="number">5</span>)</span><br><span class="line"></span><br><span class="line">a =</span><br><span class="line"></span><br><span class="line">         <span class="number">0</span>    <span class="number">0.7854</span>    <span class="number">1.5708</span>    <span class="number">2.3562</span>    <span class="number">3.1416</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; b = <span class="built_in">logspace</span>(<span class="number">0</span>,<span class="number">1</span>,<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">b =</span><br><span class="line"></span><br><span class="line">    <span class="number">1.0000</span>    <span class="number">2.1544</span>    <span class="number">4.6416</span>   <span class="number">10.0000</span></span><br></pre></td></tr></table></figure>
<p>注意，无论使用冒号运算符，或是linspace函数，生成的矩阵均为1*n的矩阵，即为行向量。使用转置符号可以将其转置为列向量。</p>
<h2 id="复合数据类型——字符串"><a href="#复合数据类型——字符串" class="headerlink" title="复合数据类型——字符串"></a>复合数据类型——字符串</h2><p>上面介绍的所有类型均为数字类型的变量。而最常见的非数类型的变量就是字符串了。MATLAB中，使用单引号表示字符串：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; a = <span class="string">&#x27;hello&#x27;</span></span><br><span class="line"></span><br><span class="line">a =</span><br><span class="line"></span><br><span class="line">hello</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>字符串是一个特殊的行向量，其每个元素是一个字符。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; b = a(<span class="number">2</span>:<span class="number">4</span>)</span><br><span class="line"></span><br><span class="line">b =</span><br><span class="line"></span><br><span class="line">ell</span><br></pre></td></tr></table></figure>
<p>字符串的拼接类似数组的拼接，但是需要注意由于字符串是行向量，只能进行横向拼接，否则将会报错。</p>
<figure class="highlight plain"><figcaption><span>[a,b]</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">ans &#x3D;</span><br><span class="line"></span><br><span class="line">helloell</span><br></pre></td></tr></table></figure>
<p>字符串和数字之间的转换也十分容易，可以利用num2str()和str2num()函数进行：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; [<span class="string">&#x27;1+1=&#x27;</span>, num2str(<span class="number">1</span>+<span class="number">1</span>)]</span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line"><span class="number">1</span>+<span class="number">1</span>=<span class="number">2</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; <span class="number">2</span> + str2num(<span class="string">&#x27;3.2&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">    <span class="number">5.2000</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>


<h2 id="复合数据类型——结构体（了解）"><a href="#复合数据类型——结构体（了解）" class="headerlink" title="复合数据类型——结构体（了解）"></a>复合数据类型——结构体（了解）</h2><p>结构体是一种特殊的数据类型，是由“变量”和其拥有的“字段”共同组成的，在初学阶段可能见到的比较少，更多的是调用MATLAB内置函数后生成的结构体变量。例如一个学生，他拥有姓名、年龄、期末成绩三个“字段”。利用“.”点运算，我们可以这样定义一个学生：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; student.name = <span class="string">&#x27;Mike&#x27;</span></span><br><span class="line"></span><br><span class="line">student = </span><br><span class="line"></span><br><span class="line">    name: <span class="string">&#x27;Mike&#x27;</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; student.age = <span class="number">22</span></span><br><span class="line"></span><br><span class="line">student = </span><br><span class="line"></span><br><span class="line">    name: <span class="string">&#x27;Mike&#x27;</span></span><br><span class="line">     age: <span class="number">22</span></span><br><span class="line"></span><br><span class="line">&gt;&gt; student.grade = [<span class="number">83</span>,<span class="number">80</span>,<span class="number">85</span>,<span class="number">90</span>]</span><br><span class="line"></span><br><span class="line">student = </span><br><span class="line"></span><br><span class="line">     name: <span class="string">&#x27;Mike&#x27;</span></span><br><span class="line">      age: <span class="number">22</span></span><br><span class="line">    grade: [<span class="number">83</span> <span class="number">80</span> <span class="number">85</span> <span class="number">90</span>]</span><br></pre></td></tr></table></figure>
<p>可以看到，随着我们不断向student变量中增加字段，其包含的信息也越来越多。同样的，我们也可以使用struct(filed,value,…)的方式直接生成结构体：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; student = struct(<span class="string">&#x27;name&#x27;</span>,<span class="string">&#x27;Mike&#x27;</span>,<span class="string">&#x27;age&#x27;</span>,<span class="number">22</span>,<span class="string">&#x27;grade&#x27;</span>,[<span class="number">83</span>,<span class="number">80</span>,<span class="number">85</span>,<span class="number">90</span>])</span><br><span class="line"></span><br><span class="line">student = </span><br><span class="line"></span><br><span class="line">     name: <span class="string">&#x27;Mike&#x27;</span></span><br><span class="line">      age: <span class="number">22</span></span><br><span class="line">    grade: [<span class="number">83</span> <span class="number">80</span> <span class="number">85</span> <span class="number">90</span>]</span><br><span class="line"></span><br><span class="line">&gt;&gt; student.grade</span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">    <span class="number">83</span>    <span class="number">80</span>    <span class="number">85</span>    <span class="number">90</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>如果想要了解更多关于结构体的用法，可以查阅MATLAB的帮助文档。</p>
<h2 id="复合结构类型——元胞矩阵（了解）"><a href="#复合结构类型——元胞矩阵（了解）" class="headerlink" title="复合结构类型——元胞矩阵（了解）"></a>复合结构类型——元胞矩阵（了解）</h2><p>元胞矩阵是矩阵的一种扩展，虽然直到现在我也不知道这个名字是怎么取出来的。在矩阵中，一个元素代表的都是一个数，或者都是一个字符。但是在元胞矩阵中，这种限制被打破，不同位置可以拥有任何类型的元素，包括字符串，数值或矩阵。为了区分元胞矩阵和普通矩阵，我们使用大括号进行定义，在使用元素时，也是用大括号对其进行取出。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; a = &#123;<span class="string">&#x27;hello&#x27;</span>,<span class="number">500</span>; [<span class="number">30</span>,<span class="number">20</span>,<span class="number">40</span>],[]&#125;</span><br><span class="line"></span><br><span class="line">a = </span><br><span class="line"></span><br><span class="line">    <span class="string">&#x27;hello&#x27;</span>         [<span class="number">500</span>]</span><br><span class="line">    [<span class="number">1</span>x3 double]       []</span><br><span class="line"></span><br><span class="line">&gt;&gt; a&#123;<span class="number">1</span>,<span class="number">1</span>&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">hello</span><br><span class="line"></span><br><span class="line">&gt;&gt; a&#123;<span class="number">2</span>,<span class="number">1</span>&#125;(<span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">    <span class="number">40</span></span><br></pre></td></tr></table></figure>
<p>可能你在尝试的过程中也发现了，利用小括号也能对其元素进行取出。关于这两种方式有何不同，我们将在之后的一篇关于元胞矩阵的讨论中再次提到。同样的，MATLAB的帮助文档永远是你的好帮手。</p>
<h2 id="流程控制"><a href="#流程控制" class="headerlink" title="流程控制"></a>流程控制</h2><p>通过前面的内容，我们已经对MATLAB中的数据类型和一些简单的命令有所了解。这篇文章将主要介绍一下MATLAB中的流程控制语句，包括顺序执行、条件控制和循环控制。相信经过这篇文章的学习，你已经可以写出像模像样的MATLAB程序了。</p>
<h3 id="顺序执行"><a href="#顺序执行" class="headerlink" title="顺序执行"></a>顺序执行</h3><p>可能你已经注意到了，我们之前的语句都是在命令行窗口中进行编写的。这样虽然可以及时得到反馈，但是如果我们想要同时执行多个语句则是非常困难的。因此我们将利用MATLAB的脚本m文件，使其从一个“大计算器”变成一个“编程工具”。</p>
<p>顺序执行是程序执行过程中最基本的执行方式，在MATLAB中也不需要对其进行任何的控制，只需要把要执行的命令按顺序写下来就可以了。例如我们需要对下面的方程组进行求解：</p>
<p>我们可以在m文件中编写以下内容。需要注意的是，如果语句不以分号结尾，则会将输出发送到命令行窗口；而如果是以分号结尾，程序虽然运行了，但不会产生任何输出：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">A = [<span class="number">1</span>,<span class="number">2</span>,<span class="number">0</span>;<span class="number">3</span>,<span class="number">4</span>,<span class="number">5</span>;<span class="number">0</span>,<span class="number">6</span>,<span class="number">7</span>]; <span class="comment">% 语句以分号结尾时，结果将不输出到命令行窗口</span></span><br><span class="line">b = [<span class="number">0</span>,<span class="number">1</span>,<span class="number">2</span>]&#x27;;</span><br><span class="line">X = A \ b <span class="comment">% 语句不以分号结尾时，结果将直接输出到命令行窗口，否则命令行将没有任何输出</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 以下是命令行输出结果</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% X =</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">%    -0.1364</span></span><br><span class="line"><span class="comment">%     0.0682</span></span><br><span class="line"><span class="comment">%     0.2273</span></span><br></pre></td></tr></table></figure>

<h3 id="条件执行"><a href="#条件执行" class="headerlink" title="条件执行"></a>条件执行</h3><p>顺序执行显然不能满足我们的需要，如果我们要操作的语句是根据一定的条件进行选择，那么我们就需要用到条件语句。</p>
<h4 id="if条件语句"><a href="#if条件语句" class="headerlink" title="if条件语句"></a>if条件语句</h4><p>最为常见的条件语句即为if条件语句，其使用方法包括以下两种：</p>
<figure class="highlight plain"><figcaption><span>如果condition条件为TRUE(1)，则执行语句statement，否则不执行</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">if condition</span><br><span class="line">    statement</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 如果condition条件TRUE(1)，则执行语句statement1，否则执行语句statement2</span></span><br><span class="line"><span class="keyword">if</span> condition</span><br><span class="line">    statement1</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    statement2</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>为了方便对控制条件进行编写，这里介绍常见的关系运算符和逻辑运算符。常用的关系运算符包括以下几个：</p>
<pre><code>==（等于），~=（不等于），&gt;（大于），&lt;（小于），&gt;=（大于等于），&lt;=（小于等于）</code></pre><p>和其他编程语言类似，注意逻辑判断中的==（等于）和赋值语句中的=（赋值）的区别。</p>
<p>常用的逻辑运算符包括以下几个：</p>
<pre><code>&amp;&amp;（逻辑与），||（逻辑或），~（逻辑非）。</code></pre><p>注意在MATLAB中，FALSE的值默认为0，TRUE的值默认为1；在进行逻辑运算时，所有的0值被当做FALSE处理，非0值被当做TRUE处理。举例说明：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">(<span class="number">3</span>&gt;<span class="number">2</span>) &amp;&amp; (<span class="number">2</span>~=<span class="number">3</span>); <span class="comment">% 结果为1（TRUE）</span></span><br><span class="line">~(<span class="number">4</span>&lt;=<span class="number">4</span>); <span class="comment">% 结果为0（FALSE）</span></span><br><span class="line">(<span class="number">3</span>&gt;<span class="number">4</span>) || <span class="number">5</span>; <span class="comment">% 结果为1（TRUE）</span></span><br><span class="line">~<span class="number">0</span>; <span class="comment">% 结果为1（TRUE）</span></span><br></pre></td></tr></table></figure>
<ul>
<li>拓展<br>  MATLAB提供位运算符，分别是&amp;（按位与），|（按位或），~（按位非）<br>  MATLAB提供的逻辑运算符支持短路操作<br>  MATLAB中不提供++、+=等类似的赋值操作符</li>
</ul>
<p>举一个栗子，如果一斤栗子10元，买5斤及以上总价打八折，计算价格的程序可以这样编写：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">unitPrice = <span class="number">10</span>; <span class="comment">% 单价10元/斤</span></span><br><span class="line">weight = <span class="number">8</span>; <span class="comment">% 输入购买的重量（斤）</span></span><br><span class="line"><span class="keyword">if</span> weight &gt;= <span class="number">5</span></span><br><span class="line">    price = unitPrice * weight * <span class="number">0.8</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    price = unitPrice * weight</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 以下是命令行输出结果</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% price =</span></span><br><span class="line"><span class="comment">% </span></span><br><span class="line"><span class="comment">%     64</span></span><br></pre></td></tr></table></figure>
<h4 id="if嵌套语句"><a href="#if嵌套语句" class="headerlink" title="if嵌套语句"></a>if嵌套语句</h4><p>if语句是可以进行层层嵌套的，例如下面是两种常见的嵌套模式：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 若condition1满足：同时满足condition2时，执行statement21；不满足时执行statement22。若condition1不满足，则执行statement1</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> condition1</span><br><span class="line">    <span class="keyword">if</span> condition2</span><br><span class="line">        statement21</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        statement22</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    statement1</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 若condition1满足，则执行statement1；否则，若condition2满足，则执行statement21，不满足时执行statement22</span></span><br><span class="line"><span class="keyword">if</span> condition1</span><br><span class="line">    statement1</span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="keyword">if</span> condition2</span><br><span class="line">        statement21</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        statement22</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>通过if语句的嵌套形式，我们可以对运行流程进行更好的控制。再举一个栗子，刚刚的栗子如果买10斤及以上则总价打7折，则计算程序如下：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">unitPrice = <span class="number">10</span>; <span class="comment">% 单价10元/斤</span></span><br><span class="line">weight = <span class="number">12</span>; <span class="comment">% 输入购买的重量（斤）</span></span><br><span class="line"><span class="keyword">if</span> weight &gt;= <span class="number">5</span></span><br><span class="line">    <span class="keyword">if</span> weight &gt;= <span class="number">10</span></span><br><span class="line">        price = unitPrice * weight * <span class="number">0.7</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        price = unitPrice * weight * <span class="number">0.8</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    price = unitPrice * weight</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 以下是命令行输出结果</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% price =</span></span><br><span class="line"><span class="comment">% </span></span><br><span class="line"><span class="comment">%     84</span></span><br></pre></td></tr></table></figure>

<h4 id="switch语句"><a href="#switch语句" class="headerlink" title="switch语句"></a>switch语句</h4><p>当我们要判断的分支非常多时，如果使用嵌套if语句写法，将会显得十分繁琐。这时我们可以使用switch语句来使得程序可读性更强。</p>
<p>switch语句的用法是这样的。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">switch</span> variable</span><br><span class="line">    <span class="keyword">case</span> &#123;value11,value12...&#125;</span><br><span class="line">        statement1</span><br><span class="line">    <span class="keyword">case</span> value2</span><br><span class="line">        statement2</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">case</span> valuen</span><br><span class="line">        statementn</span><br><span class="line">    <span class="keyword">otherwise</span></span><br><span class="line">        statement</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>当variable的值可以匹配上其中的任何value时，会直接跳转执行其对应的语句；如果没有匹配上任何值，则会直接跳转到otherwise语句进行执行。需要注意的是，otherwise语句并不是必须的。</p>
<p>不同于其他语言的switch语句，如果多个值对应同一个执行语句，可以利用大括号将值写在一起。这也意味着MATLAB不需要在每一个分支后使用break进行显式中断。</p>
<p>我们可以编写一个根据年份和月份判断该月有几天的程序：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">year = <span class="number">2012</span>;</span><br><span class="line">month = <span class="number">2</span>;</span><br><span class="line"><span class="keyword">switch</span> month</span><br><span class="line">    <span class="keyword">case</span> &#123;<span class="number">1</span>,<span class="number">3</span>,<span class="number">5</span>,<span class="number">7</span>,<span class="number">8</span>,<span class="number">10</span>,<span class="number">12</span>&#125; <span class="comment">% 一三五七八十腊，三十一天永不差</span></span><br><span class="line">        days = <span class="number">31</span></span><br><span class="line">    <span class="keyword">case</span> &#123;<span class="number">4</span>,<span class="number">6</span>,<span class="number">9</span>,<span class="number">11</span>&#125; <span class="comment">% 四六九冬三十日</span></span><br><span class="line">        days = <span class="number">30</span></span><br><span class="line">    <span class="keyword">case</span> <span class="number">2</span> <span class="comment">% 二月需要判断是否为闰年</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">mod</span>(year,<span class="number">4</span>) == <span class="number">0</span> &amp;&amp; <span class="built_in">mod</span>(year,<span class="number">100</span>) ~= <span class="number">0</span>) || (<span class="built_in">mod</span>(year,<span class="number">400</span>) == <span class="number">0</span>)</span><br><span class="line">            days = <span class="number">29</span></span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            days = <span class="number">28</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 以下是命令行输出结果</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% days =</span></span><br><span class="line"><span class="comment">% </span></span><br><span class="line"><span class="comment">%     29</span></span><br></pre></td></tr></table></figure>
<p>在这个例子中，我们在switch语句内部再次使用了if语句，用于对闰年的判断。其中mod(a,b)函数表示a对b的模。</p>
<h3 id="循环执行"><a href="#循环执行" class="headerlink" title="循环执行"></a>循环执行</h3><p>流程控制中的循环语句非常重要，它避免了我们写几乎重复的代码，而通过程序的循环与退出对其进行控制。常见的循环执行语句有while循环和for循环。</p>
<h4 id="while循环"><a href="#while循环" class="headerlink" title="while循环"></a>while循环</h4><p>while循环是最容易理解的一种循环，其用法如下所示：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">while</span> condition</span><br><span class="line">    statement</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>当condition条件为真时，循环执行statement语句，然后再次判断condition条件，直至condition条件不再满足时退出循环。如果在进入while循环前，condition条件不满足，则循环直接不会执行。</p>
<p>我们以经典的“水滴数”计算为例，练习while循环。水滴数是这样计算的：对于任意一个正整数，如果它是奇数，则乘3再加1；如果它是偶数，就除以2。循环往复，最后终将变成1（该结果尚未被证明，但至今未发现反例）。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">num = <span class="number">50</span>; <span class="comment">% 以50为例，显示水滴数的变化过程。由于num的计算过程没有加分号，会输出每次运算的结果。</span></span><br><span class="line"><span class="keyword">while</span> num ~= <span class="number">1</span> <span class="comment">% 还没有减小到1时，不断循环</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">mod</span>(num,<span class="number">2</span>) == <span class="number">0</span> <span class="comment">% 如果是偶数</span></span><br><span class="line">        num = num / <span class="number">2</span></span><br><span class="line">    <span class="keyword">else</span> <span class="comment">% 如果是奇数</span></span><br><span class="line">        num = num * <span class="number">3</span> + <span class="number">1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 命令行输出结果：（略）</span></span><br></pre></td></tr></table></figure>

<h4 id="for循环"><a href="#for循环" class="headerlink" title="for循环"></a>for循环</h4><p>回顾一下高斯的优秀事迹：如果要计算1到100的和，如何写这个循环呢？我们当然可以采用如下的while循环的方式进行编写：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">sum = <span class="number">0</span>;    <span class="comment">% 保存求和结果</span></span><br><span class="line"><span class="built_in">i</span> = <span class="number">1</span>;        <span class="comment">% 当前数</span></span><br><span class="line"><span class="keyword">while</span> <span class="built_in">i</span> &lt;= <span class="number">100</span></span><br><span class="line">    sum = sum + <span class="built_in">i</span>;</span><br><span class="line">    <span class="built_in">i</span> = <span class="built_in">i</span> + <span class="number">1</span>; <span class="comment">% 不要忘记变到下一个数</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">sum        <span class="comment">% 不加分号，输出最后结果</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 以下是命令行输出结果</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% sum =</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">%         5050</span></span><br></pre></td></tr></table></figure>
<p>但是除了while循环外，还有一种更加方便的计数循环：for循环可以快速解决这个问题。for循环的格式如下：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> variable = value</span><br><span class="line">    statement</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>其中value一般是利用冒号运算符得到的等差数列。我们利用for循环改写一下求和程序：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sum &#x3D; 0;        % 保存求和结果</span><br><span class="line">for i &#x3D; 1:100</span><br><span class="line">    sum &#x3D; sum + i;    % 累加</span><br><span class="line">end</span><br><span class="line">sum             % 输出结果</span><br><span class="line"></span><br><span class="line">% 以下是命令行输出结果</span><br><span class="line">%</span><br><span class="line">% sum &#x3D;</span><br><span class="line">%</span><br><span class="line">%         5050</span><br></pre></td></tr></table></figure>
<p>可以看到使用for循环后整个程序变得更加简洁易懂。同样的，我们还可以求100以内所有奇数的平方和：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">sum = <span class="number">0</span>;            <span class="comment">% 保存求和结果</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="number">2</span>:<span class="number">100</span>            <span class="comment">% 1~100以内所有奇数</span></span><br><span class="line">    sum = sum + <span class="built_in">i</span>^<span class="number">2</span>;    <span class="comment">% 累加</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">sum                 <span class="comment">% 输出结果</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 以下是命令行输出结果</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">% sum =</span></span><br><span class="line"><span class="comment">%</span></span><br><span class="line"><span class="comment">%       166650</span></span><br></pre></td></tr></table></figure>
<p>我们可以看到，使用for循环避免了编写复杂的循环控制条件，使得程序编写者可以直接确定循环的次数和循环变量的值。而当循环次数未知时，则仍需要使用while循环对其进行控制。</p>
<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><p>在我们已经可以编写简单的MATLAB脚本之后，我们需要学习一个更加强大的编程工具：函数。这篇文章将主要介绍MATLAB中函数的使用。</p>
<h3 id="函数的思想"><a href="#函数的思想" class="headerlink" title="函数的思想"></a>函数的思想</h3><p>之所以说函数是一种强大的工具，是因为使用函数可以让我们的代码变得更加简洁，同时也给我们模块化带来了很大的方便。</p>
<p>以我们在生活中做家务为例，正常情况下，我们需要具体写出做家务的每一步，例如：</p>
<figure class="highlight plain"><figcaption><span>擦桌子</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">2. 洗碗</span><br><span class="line">3. 扫地</span><br><span class="line">4. xxxx</span><br><span class="line">5. 擦桌子</span><br><span class="line">6. 洗碗</span><br><span class="line">7. 扫地</span><br><span class="line">8. ...</span><br></pre></td></tr></table></figure>

<p>如果我们将其组织成一个函数，那我们每次只需要调用做家务这个函数，就可以实现这样一套流程。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">定义：做家务 &#x3D; </span><br><span class="line">    1. 擦桌子</span><br><span class="line">    2. 洗碗</span><br><span class="line">    3. 扫地</span><br><span class="line"></span><br><span class="line">1. 做家务</span><br><span class="line">2. xxxx</span><br><span class="line">3. 做家务</span><br><span class="line">4. ...</span><br></pre></td></tr></table></figure>
<p>同样，如果我们需要在做家务的过程中添加一项“倒垃圾”，我们只需要在函数端进行修改，而不用对调用部分的代码做任何改动，这样模块化的方法将使得我们代码的可维护性大大增强。</p>
<h3 id="函数定义"><a href="#函数定义" class="headerlink" title="函数定义"></a>函数定义</h3><p>了解了函数的作用之后，我们就需要了解如何对函数进行定义。MATLAB中的函数定义包括function保留字、输出变量、函数名、输入参数、函数体几部分：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% function为保留字，out1~outN为函数输出，function_name为函数名，para1~paraN为输入参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[out1, out2, outN]</span> = <span class="title">function_name</span><span class="params">(para1, para2, paraN)</span></span></span><br><span class="line">    statements</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>定义函数时，一般通过建立单独的函数m文件进行编写。例如，我们可以定义一个“给定两个数，返回其和”的函数add。因此我们可以首先选择新建 -&gt; 函数选项，新建一个与函数名同名的函数m文件（事实上，函数m文件和脚本m文件没有实质性的不同，但是新建函数m文件时将会自动生成函数结构）。这时我们可以看到MATLAB已经自动为我们生成好了函数的结构。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[ output_args ]</span> = <span class="title">Untitled1</span><span class="params">( input_args )</span></span></span><br><span class="line"><span class="comment">%UNTITLED1 此处显示有关此函数的摘要</span></span><br><span class="line"><span class="comment">%   此处显示详细说明</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>我们将其更改为下面内容：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span> = <span class="title">add</span><span class="params">(num1, num2)</span></span></span><br><span class="line"><span class="comment">%add 给定两个数，返回其和</span></span><br><span class="line"><span class="comment">%   给定输入的两个数num1和num2，计算得到两数之和并返回（虽然看起来很啰嗦，但是把输入输出讲清楚非常重要）</span></span><br><span class="line">    sum = num1 + num2;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>通过这个例子我们可以看到，与一般的编程语言不同，MATLAB没有显式的return语句返回计算结果，而是通过在语句中给输出变量赋值的方法实现返回值。类似的，如果我们的函数具有多个返回值，我们即需要对所有的输出变量进行赋值。</p>
<p>MATLAB也支持没有任何输出的函数，此时函数仅需要包含如下部分：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 没有返回值的函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">function_name</span><span class="params">(para1, para2, paraN)</span></span></span><br><span class="line">    statements</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>
<p>一般而言，这种没有返回值的函数使用较少，主要是为了实现一些附加作用而使用的。</p>
<h3 id="函数调用"><a href="#函数调用" class="headerlink" title="函数调用"></a>函数调用</h3><p>定义函数是为了方便我们进行调用。MATLAB中调用已定义的函数非常简单，实际上我们之前已经调用过系统内置函数，例如zeros()、ones()等。调用函数的方法如下所示：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">% 调用函数</span><br><span class="line">[out1, out2, outN] &#x3D; function_name(para1, para2, paraN)</span><br></pre></td></tr></table></figure>
<p>与上述我们定义的add函数相匹配的函数调用为</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt; a = add(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line">a =</span><br><span class="line"></span><br><span class="line">     <span class="number">3</span></span><br></pre></td></tr></table></figure>
<p>这与我们定义函数的形式非常一致。需要注意的是，当输出变量的个数小于函数实际返回的变量个数时，MATLAB将默认从前到后进行返回，并不会引起报错。下面的例子很好的说明了这一点。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%% 文件calculate.m %%%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 计算两个数的四则运算结果</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[res1, res2, res3, res4]</span> = <span class="title">calculate</span><span class="params">(num1, num2)</span></span></span><br><span class="line">    res1 = num1 + num2;</span><br><span class="line">    res2 = num1 - num2;</span><br><span class="line">    res3 = num1 * num2;</span><br><span class="line">    res4 = num1 / num2;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%%% 文件Script5_1.m %%%</span></span><br><span class="line"></span><br><span class="line">sum = calculate(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line">[sum, diff, product, quot] = calculate(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 以下是运行Script5_1.m的命令行输出结果</span></span><br><span class="line"><span class="comment">% 注：此为第1行运行结果</span></span><br><span class="line">sum =</span><br><span class="line">     <span class="number">3</span></span><br><span class="line"><span class="comment">% 注：此为第2行运行结果</span></span><br><span class="line">sum =</span><br><span class="line">     <span class="number">3</span></span><br><span class="line">diff =</span><br><span class="line">    <span class="number">-1</span></span><br><span class="line">product =</span><br><span class="line">     <span class="number">2</span></span><br><span class="line">quot =</span><br><span class="line">    <span class="number">0.5000</span></span><br></pre></td></tr></table></figure>
<p>之所以强调是Script5_1.m的运行结果，是因为带有输入参数的函数是无法直接被运行的。但是没有输入参数的函数可以直接被运行，例如下列函数在屏幕上打印出Hello World字样。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">% 在屏幕上打印出Hello World</span><br><span class="line">function hello()</span><br><span class="line">    disp(&#39;Hello World!&#39;);</span><br><span class="line">end</span><br><span class="line"></span><br><span class="line">% 以下是命令行输出结果</span><br><span class="line">Hello World!</span><br></pre></td></tr></table></figure>

<h3 id="函数变量"><a href="#函数变量" class="headerlink" title="函数变量"></a>函数变量</h3><h4 id="函数作为参数"><a href="#函数作为参数" class="headerlink" title="函数作为参数"></a>函数作为参数</h4><p>这一部分可能会使得编程基础稍差的同学感到迷惑，不过耐心读几遍还是可以读懂的。</p>
<p>MATLAB一项令人欣喜的功能是可以将函数作为变量看待，其方式为使用’@’字符。例如我们编写了之前的add.m文件后，使用以下命令：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 将add函数赋值给var_fun函数</span></span><br><span class="line">var_fun = @add;</span><br><span class="line"><span class="comment">% 使用var_fun函数</span></span><br><span class="line">var_fun(<span class="number">3</span>, <span class="number">5</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 以下是命令行输出结果</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">     <span class="number">8</span></span><br></pre></td></tr></table></figure>
<p>我们发现，我们定义的var_fun居然实现了和add一样的功能！这看起来很不可思议，但实际上这正是函数式编程的基本概念。甚至，我们还可以将函数作为函数参数进行传递。例如我们定义了一个函数operate，这个函数接受一个操作两个数的函数（例如add）和两个数字，给出计算结果。我们可以这样定义：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%% 文件add.m %%%</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span> = <span class="title">add</span><span class="params">(num1, num2)</span></span></span><br><span class="line">    sum = num1 + num2;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%%% 文件operate.m %%%</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">result</span> = <span class="title">operate</span><span class="params">(my_fun, num1, num2)</span></span></span><br><span class="line">    result = my_fun(num1, num2);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%%% 文件Script5_2.m %%%</span></span><br><span class="line"></span><br><span class="line">operate(@add, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 以下是命令行输出结果</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">     <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>我们惊讶地发现，我们将add函数作为参数成功传递给了operate，并给出了正确的计算结果。请认真思考上述代码的执行流程。</p>
<h4 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h4><p>提起函数式编程，就不得不提到大名鼎鼎的Lambda函数。在MATLAB中，同样对Lambda函数提供了支持。为方便不了解函数式编程的同学，下面将统一称之为“匿名函数”。</p>
<p>首先回想我们使用函数的流程。我们需要确定函数的输入与输出、函数名，新建函数m文件，编写函数体，然后在主程序中对函数进行调用。但很多时候，我们编写的函数可能往往只有一行或更少，这种情况下单独编写一个函数m文件就显得非常麻烦。甚至有些时候，这个函数我们只需要用一次，能不能不取名呢？匿名函数（Lambda函数）就很好地解决了这个问题。</p>
<p>匿名函数的声明如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@(para1, para2, paraN)expression</span><br></pre></td></tr></table></figure>
<p>匿名函数的形式十分简洁，将整个函数的定义缩减到一行内。例如之前的add函数，我们可以这样进行改写</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 定义add函数的Lambda形式</span></span><br><span class="line">lambda_add = @(a, b)a + b</span><br><span class="line"><span class="comment">% 调用函数</span></span><br><span class="line">lambda_add(<span class="number">3</span>, <span class="number">4</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 以下是命令行输出结果</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line"></span><br><span class="line">     <span class="number">7</span></span><br></pre></td></tr></table></figure>
<p>可以看到Lambda函数保持了和原函数一样的功能。我们将之前的Script5_2.m文件进行Lambda函数改写：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%% 文件operate.m %%%</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">result</span> = <span class="title">operate</span><span class="params">(my_fun, num1, num2)</span></span></span><br><span class="line">    result = my_fun(num1, num2);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%%% 文件Script5_2.m %%%</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 利用operate函数和匿名函数进行四则运算</span></span><br><span class="line">operate(@(a,b)a + b, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">operate(@(a,b)a - b, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">operate(@(a,b)a * b, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line">operate(@(a,b)a / b, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 以下是命令行输出结果</span></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line">     <span class="number">5</span></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line">    <span class="number">-1</span></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line">     <span class="number">6</span></span><br><span class="line"><span class="built_in">ans</span> =</span><br><span class="line">    <span class="number">0.6667</span></span><br></pre></td></tr></table></figure>
<p>看到这里，相信大多数人一定一头雾水，不禁想到：这有什么卵用？事实上这还真的用卵用，后面的章节中我们可以看到很多匿名函数的使用，因此希望这一节的内容你能够尽量理解~</p>
<h3 id="形参vs实参"><a href="#形参vs实参" class="headerlink" title="形参vs实参"></a>形参vs实参</h3><p>学过其他编程语言的同学在对待函数时，往往需要急切地弄清楚什么时候函数传递形参，什么时候传递实参呢？</p>
<p>先上结论：MATLAB函数永远传递形参</p>
<p>没有理解的同学可以通过下面的例子感受一下。</p>
<p>假设我现在有一个1*5的矩阵，我现在想让这个矩阵的第一个元素加1，那么有什么办法呢？最直观的想法是这样的：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%% 文件add_one.m %%%</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add_one</span><span class="params">(mat)</span></span></span><br><span class="line">    mat(<span class="number">1</span>, <span class="number">1</span>) = mat(<span class="number">1</span>, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>表面上看来，这个函数对于任何传递进来的矩阵mat，都将第一个元素进行了加1操作。我们对其进行一下测试：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%% 文件Script5_3.m %%%</span></span><br><span class="line">mat = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">add_one(mat);</span><br><span class="line">mat</span><br><span class="line"></span><br><span class="line"><span class="comment">% 以下是命令行输出结果</span></span><br><span class="line"></span><br><span class="line">mat =</span><br><span class="line"></span><br><span class="line">     <span class="number">1</span>     <span class="number">2</span>     <span class="number">3</span>     <span class="number">4</span>     <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>我们惊讶地发现，mat的值并没有发生任何变化！事实上，无论我们在函数内对传入参数进行什么操作，都不会影响到参数在主程序中的原本值，这是因为MATLAB使用的是“形参传递”。在这个过程中，实际上在MATLAB内部发生了如下的事情：</p>
<pre><code>1 主程序调用函数，此时需要传递参数mat=[1,2,3,4,5]
2 主程序将所有需要传递的参数的值复制了一份，生成了参数副本mat_copy=[1,2,3,4,5]
3 主程序将计算中的所有变量暂存，进入函数执行模式
4 函数利用mat_copy进行计算，当函数试图修改mat的值时，实际在修改mat_copy的值，使得mat_copy=[2,2,3,4,5]
5 函数计算完成，告知主程序计算完成，并将计算结果返回主程序
6 主程序将暂存变量恢复，mat的值仍为[1,2,3,4,5]</code></pre><p>因此，无论我们怎么做，主程序中的值都无法在函数中进行修改。那我们怎样实现上述需求呢？一种方式是可以将mat_copy的值直接返回给主程序，主程序再将mat的值替换为函数返回值。如下：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%% 文件add_one.m %%%</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mat</span> = <span class="title">add_one</span><span class="params">(mat)</span></span></span><br><span class="line">    mat(<span class="number">1</span>, <span class="number">1</span>) = mat(<span class="number">1</span>, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%%% 文件Script5_3.m %%%</span></span><br><span class="line">mat = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">mat = add_one(mat)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 以下是命令行输出结果</span></span><br><span class="line"></span><br><span class="line">mat =</span><br><span class="line"></span><br><span class="line">     <span class="number">2</span>     <span class="number">2</span>     <span class="number">3</span>     <span class="number">4</span>     <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>这样做或许显得不美观，但也不失为一种好方法。</p>
<p>还有一种方法则是利用全局变量的方法。</p>
<h3 id="全局变量"><a href="#全局变量" class="headerlink" title="全局变量"></a>全局变量</h3><p>在介绍全局变量之前，我们需要先了解一下变量空间。变量空间是指MATLAB计算过程中当前状态可以使用的所有变量。例如在主程序中可以访问在主程序中定义的变量，但是在函数运行过程中就无法使用主程序定义的变量，因此我们说它们属于不同的变量空间。</p>
<p>一般而言，MATLAB的变量空间可以有多个，其中所有的脚本m文件共享一个变量空间，例如先执行Script2_1.m，再执行Script2_2.m时仍然可以访问在之前的脚本中已经定义的函数；而不同的函数m文件属于不同的变量空间，且不同于脚本m文件的变量空间，因此任何函数都不能调用在其他函数中或者主程序中定义的变量。<br><img src="/img/matlab/matlab005_variable_spaces.jpg" alt="variable_spaces"></p>
<p>之所以传递到函数中的参数不能修改，是因为主程序中传进去的参数是属于主程序的变量空间，当函数开始执行时，主程序的变量就被暂存起来无法改动了。那我们自然想到，能不能利用什么方法，使得一个变量不只是属于主程序呢？答案就是全局变量。全局变量不属于任何一个程序模块，在任何时候都可以被修改。</p>
<p>我们使用如下的方式定义或使用一个全局变量：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">global</span> global_var;</span><br><span class="line">statements</span><br></pre></td></tr></table></figure>
<p>使用任何全局变量前，都要先进行声明，以告知编译器：这是一个全局变量，请不要在局部变量里面寻找。使用全局变量可以对上述的add_one方法进行改写：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%%% 文件add_one.m %%%</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add_one</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">global</span> mat;</span><br><span class="line">    mat(<span class="number">1</span>, <span class="number">1</span>) = mat(<span class="number">1</span>, <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%%% 文件Script5_3.m %%%</span></span><br><span class="line"><span class="keyword">global</span> mat;</span><br><span class="line">mat = [<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>];</span><br><span class="line">add_one();</span><br><span class="line">mat</span><br><span class="line"></span><br><span class="line"><span class="comment">% 以下是命令行输出结果</span></span><br><span class="line"></span><br><span class="line">mat =</span><br><span class="line"></span><br><span class="line">     <span class="number">2</span>     <span class="number">2</span>     <span class="number">3</span>     <span class="number">4</span>     <span class="number">5</span></span><br></pre></td></tr></table></figure>
<p>使用全局变量非常方便，但是需要注意的是，使用全局变量与函数化、模块化的概念完全相悖，大量使用全局变量将使得程序的逻辑控制变得复杂，可读性变差。因此建议大家尽量不要使用全局变量，以免生出“一个月前写的程序自己都看不懂”的悲剧。</p>
<h2 id="matlab绘图"><a href="#matlab绘图" class="headerlink" title="matlab绘图"></a>matlab绘图</h2><p>为了将计算结果进行可视化呈现，MATLAB提供了诸多绘图功能，可以满足不同可视化的需求。这篇内容将主要介绍使用MATLAB进行二维绘图的入门操作。</p>
<h3 id="plot函数"><a href="#plot函数" class="headerlink" title="plot函数"></a>plot函数</h3><p>提到MATLAB中的二维绘图函数，那一定要提到plot函数。虽然是最基础的二维绘图函数，但是其功能却十分的强大。在开始绘图的学习之前，请先将下面这句话默念3遍：</p>
<p>MATLAB主要用来处理【数值运算】！</p>
<p>这句话虽然不完全正确，但在初学阶段请牢记。如同之前提到的，MATLAB的主要运算对象是【矩阵】，因此MATLAB的绘制实际上是根据你提供的数据进行绘图，换句话说你可以当作MATLAB是个不认识函数的“傻子”。举个栗子，你让MATLAB绘制所谓y=sin(x)的图像，它做不到；但是根据产生的x、y值序列，MATLAB可以轻松进行绘图。</p>
<h4 id="plot函数的基本使用方法"><a href="#plot函数的基本使用方法" class="headerlink" title="plot函数的基本使用方法"></a>plot函数的基本使用方法</h4><p>plot函数可以根据提供的数据绘制对应的图像，其基本用法如下：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 以1:n为X坐标，绘制Y值的折线图</span></span><br><span class="line"><span class="built_in">plot</span>(Y)</span><br><span class="line"><span class="comment">% 根据提供的X和Y数据绘制折线图</span></span><br><span class="line"><span class="built_in">plot</span>(X, Y)</span><br><span class="line"><span class="comment">% 绘制折线图并指定线型、颜色等特征</span></span><br><span class="line"><span class="built_in">plot</span>(X, Y, LineSpec)</span><br><span class="line"><span class="comment">% 在同一幅图中绘制多组图线</span></span><br><span class="line"><span class="built_in">plot</span>(X1, Y1, LineSpec1, Xn, Yn, LineSpecn)</span><br></pre></td></tr></table></figure>

<p>例如我们绘制函数y=sin(x)在区间[0,5]上的图像，可以使用以下的代码：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 产生x值数据，这里每隔0.1取一个点。</span></span><br><span class="line">x = <span class="number">0</span>:<span class="number">0.1</span>:<span class="number">5</span>;</span><br><span class="line"><span class="comment">% 根据函数关系，生成对应的y值数据；MATLAB提供的sin函数支持对向量的处理。</span></span><br><span class="line">y = <span class="built_in">sin</span>(x);</span><br><span class="line"><span class="comment">% 绘图，选择曲线为红色</span></span><br><span class="line"><span class="built_in">plot</span>(x, y, <span class="string">&#x27;r&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>绘图结果如图所示：<br><img src="/img/matlab/matlab006_plot1.png" alt="plot1"></p>
<p>同时绘制y=x^2和y=0.5x^3两个图像：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 产生x值数据，这里每隔0.1取一个点。</span></span><br><span class="line">x = <span class="number">0</span>:<span class="number">0.1</span>:<span class="number">5</span>;</span><br><span class="line"><span class="comment">% 根据函数关系，生成对应的y值数据。</span></span><br><span class="line">y1 = x.^<span class="number">2</span>;</span><br><span class="line">y2 = <span class="number">0.5</span> * x.^<span class="number">3</span>;</span><br><span class="line"><span class="comment">% 绘图</span></span><br><span class="line"><span class="built_in">plot</span>(x, y1, <span class="string">&#x27;r^-&#x27;</span>, x, y2, <span class="string">&#x27;ko--&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>绘图结果：<br><img src="/img/matlab/matlab007_plot2.png" alt="plot2"></p>
<p>常见的颜色、线型、标记点属性如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">颜色     符号</span><br><span class="line">红色     ‘r’</span><br><span class="line">粉红     ‘m’</span><br><span class="line">绿色     ‘g’</span><br><span class="line">青色     ‘c’</span><br><span class="line">蓝色     ‘b’</span><br><span class="line">白色     ‘w’</span><br><span class="line">黄色     ‘y’</span><br><span class="line">黑色     ‘k’</span><br><span class="line">线型     符号</span><br><span class="line">实线     ’-‘</span><br><span class="line">虚线     ’–’</span><br><span class="line">点线     ’:’</span><br><span class="line">点划线     ’-.’</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">标记点类型     符号</span><br><span class="line">上三角     ’^’</span><br><span class="line">下三角     ‘v’</span><br><span class="line">左三角     ’&lt;’</span><br><span class="line">右三角     ’&gt;’</span><br><span class="line">星号     ‘*’</span><br><span class="line">加号     ’+’</span><br><span class="line">叉号     ‘x’</span><br><span class="line">实心圆     ’.’</span><br><span class="line">空心圆     ‘o’</span><br><span class="line">正方形     ’s’</span><br><span class="line">五角星     ‘p’</span><br><span class="line">六角星     ‘h’</span><br><span class="line">菱形     ‘d’</span><br></pre></td></tr></table></figure>

<p>这些属性可以仅指定一种，也可以被同时指定，指定时无需区分顺序。需要注意的是如果指定了标记点类型的话，必须要进一步指定线型，否则绘图时只会出现标记点而没有线。</p>
<h4 id="plot函数的额外属性"><a href="#plot函数的额外属性" class="headerlink" title="plot函数的额外属性"></a>plot函数的额外属性</h4><p>使用plot函数除了可以对颜色、线型、标记点类型进行修改外，还可以通过以下方式设定通用属性值：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">plot(X, Y, LineSpec, Name, Value)</span><br></pre></td></tr></table></figure>
<p>常见的属性值包括</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">属性名     说明</span><br><span class="line">‘LineWidth’     线宽（默认为0.5）</span><br><span class="line">‘MarkerSize’     标记点大小（默认为6.0）</span><br><span class="line">‘MarkerEdgeColor’     标记点轮廓颜色（与线颜色写法相同）</span><br><span class="line">‘MarkerFaceColor’     标记点填充颜色（与线颜色写法相同）</span><br></pre></td></tr></table></figure>
<p>例如下面代码设置了多种参数：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">x = -<span class="built_in">pi</span>:<span class="built_in">pi</span>/<span class="number">10</span>:<span class="built_in">pi</span>;</span><br><span class="line">y = <span class="built_in">tan</span>(<span class="built_in">sin</span>(x)) - <span class="built_in">sin</span>(<span class="built_in">tan</span>(x));</span><br><span class="line"></span><br><span class="line"><span class="built_in">plot</span>(x,y,<span class="string">&#x27;--gs&#x27;</span>,...</span><br><span class="line">    <span class="string">&#x27;LineWidth&#x27;</span>,<span class="number">2</span>,...</span><br><span class="line">    <span class="string">&#x27;MarkerSize&#x27;</span>,<span class="number">10</span>,...</span><br><span class="line">    <span class="string">&#x27;MarkerEdgeColor&#x27;</span>,<span class="string">&#x27;b&#x27;</span>,...</span><br><span class="line">    <span class="string">&#x27;MarkerFaceColor&#x27;</span>,[<span class="number">0.5</span>,<span class="number">0.5</span>,<span class="number">0.5</span>])</span><br></pre></td></tr></table></figure>
<p>绘制出的图像如下所示：<br><img src="/img/matlab/matlab008_plot3.png" alt="plot3"></p>
<h4 id="添加-设置图像其他部分"><a href="#添加-设置图像其他部分" class="headerlink" title="添加/设置图像其他部分"></a>添加/设置图像其他部分</h4><p>一张完整的图表应当包括标题、轴坐标等元素。下面展示了一些常用的添加/设置图表元素的方法。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% 设置图表标题</span></span><br><span class="line">title(<span class="string">&#x27;Sample Title&#x27;</span>);</span><br><span class="line"><span class="comment">% 设置x坐标轴名称</span></span><br><span class="line">xlabel(<span class="string">&#x27;X Label Title&#x27;</span>);</span><br><span class="line"><span class="comment">% 设置y坐标轴名称</span></span><br><span class="line">ylabel(<span class="string">&#x27;Y Label Title&#x27;</span>);</span><br><span class="line"><span class="comment">% 设置图例项</span></span><br><span class="line"><span class="built_in">legend</span>(<span class="string">&#x27;Legend1&#x27;</span>,<span class="string">&#x27;Legend2&#x27;</span>,<span class="string">&#x27;LegendN&#x27;</span>);</span><br><span class="line"><span class="comment">% 设置X、Y轴坐标范围</span></span><br><span class="line">xlim([XMIN, XMAX]);</span><br><span class="line">ylim([YMIN, YMAX]);</span><br><span class="line"><span class="comment">% 或者使用以下方式设置坐标范围</span></span><br><span class="line">axis([XMIN, XMAX, YMIN, YMAX]);</span><br><span class="line"><span class="comment">% 开启网格</span></span><br><span class="line">grid on</span><br><span class="line"></span><br></pre></td></tr></table></figure>
<p>使用代码对图像进行调整，可以使得每次生成的图像具有相同的属性。但是还有一种更加交互化（福利化）的方式，那就是在图像界面进行直接设置。在生成的图像中选择“编辑”-&gt;“图形属性”，即可打开对应的交互化设置界面。点击图中的坐标轴、图线还可以对这些元素进行对应的设置。<br><img src="/img/matlab/matlab009_plot4.png" alt="plot4"></p>
<h3 id="新建图像和添加图像"><a href="#新建图像和添加图像" class="headerlink" title="新建图像和添加图像"></a>新建图像和添加图像</h3><p>当你想要绘制多张图像时，你可能会发现多次调用plot方法会使得后一次绘制的结果覆盖已有的图像。为了生成新的图像，需要使用以下命令生成一张空白的图像。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">figure</span>;</span><br></pre></td></tr></table></figure>
<p>事实上，在你第一次调用plot()函数时，你可以认为MATLAB已经自动调用了figure方法，生成新的空白图像用于绘图。但之后若没有再次调用figure方法，则每次使用plot()时将覆盖已有的图像。</p>
<p>例如使用以下代码生成互为反函数的y=ln(x)和y=e^x的两幅图像：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">0.1</span>:<span class="number">0.1</span>:<span class="number">5</span>;</span><br><span class="line">y = <span class="built_in">log</span>(x);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>;     <span class="comment">% 第一次绘制时，figure命令可省略</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 绘制函数y=ln(x)的图像</span></span><br><span class="line"><span class="built_in">plot</span>(x, y);</span><br><span class="line">title(<span class="string">&#x27;函数y=ln(x)&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 绘制函数y=e^x的图像</span></span><br><span class="line"><span class="built_in">plot</span>(y, x);</span><br><span class="line">title(<span class="string">&#x27;函数y=e^x&#x27;</span>);</span><br></pre></td></tr></table></figure>
<p>Matlab会生成两幅图像：</p>
<p><img src="/img/matlab/matlab010_plot5.png" alt="plot5"></p>
<p><img src="/img/matlab/matlab011_plot6.png" alt="plot6"></p>
<p>有时我们可能并不想将结果绘制在多个图像上，而是直接绘制在同一个图像上。但是多次使用plot()函数又会使得之前的图像被覆盖，这时就需要使用hold on命令来保持当前图像。</p>
<p>hold on命令的使用方法如下：</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">plot</span>();</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"><span class="built_in">plot</span>();</span><br></pre></td></tr></table></figure>
<p>需要注意的是，使用hold on命令之后，两次的plot将完全不相关，等同于在一次plot()函数中同时绘制多组数据。因此使用对于plot()函数出现的多条图线，将不会自动生成直线连接它们。</p>
<p>使用hold on方法可以使我们绘制图像时不拘泥于将绘图数据全部计算完成后画出，而是使用“更新”的方法进行绘图。例如绘制幂函数y=x^a在不同a值时的函数图像：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">figure;        % 第一次绘制时，figure命令可省略</span><br><span class="line">for a &#x3D; -2:2</span><br><span class="line">    x &#x3D; -2:0.1:2;</span><br><span class="line">    y &#x3D; x .^ a;</span><br><span class="line">    plot(x, y, &#39;linewidth&#39;, 1);</span><br><span class="line">    hold on;</span><br><span class="line">end</span><br><span class="line">grid on;</span><br><span class="line">axis([-2,2,-5,5]);</span><br><span class="line">title(&#39;y&#x3D;x^a在不同a值下的图像&#39;);</span><br><span class="line">legend(&#39;a&#x3D;-2&#39;, &#39;a&#x3D;-1&#39;, &#39;a&#x3D;0&#39;, &#39;a&#x3D;1&#39;, &#39;a&#x3D;2&#39;);</span><br></pre></td></tr></table></figure>
<p>绘制在同一幅图中的效果：<br><img src="/img/matlab/matlab012_plot7.png" alt="plot7"></p>
<p>利用hold on还可以作出类似“动态变化”的效果:</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">% “水滴数”动态变化图</span></span><br><span class="line"><span class="comment">% 设置初始值</span></span><br><span class="line">num = <span class="number">50</span>;</span><br><span class="line"><span class="comment">% 设置刷新时间</span></span><br><span class="line">refresh = <span class="number">0.5</span>;</span><br><span class="line"><span class="comment">% 记录迭代次数</span></span><br><span class="line">iter = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 进行第一次绘图，这里我们采用散点图，并添加标题等其他元素</span></span><br><span class="line"><span class="built_in">figure</span>;     <span class="comment">% 第一次绘制图像的时候，是否添加这句话效果相同</span></span><br><span class="line"><span class="built_in">plot</span>(iter, num, <span class="string">&#x27;ro&#x27;</span>);</span><br><span class="line">axis([<span class="number">1</span>, <span class="number">25</span>, <span class="number">0</span>, <span class="number">100</span>]);</span><br><span class="line">title(<span class="string">&#x27;“水滴数”动态变化展示&#x27;</span>);</span><br><span class="line">xlabel(<span class="string">&#x27;迭代次数&#x27;</span>);</span><br><span class="line">ylabel(<span class="string">&#x27;数值&#x27;</span>);</span><br><span class="line"><span class="built_in">hold</span> on;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 开始迭代计算</span></span><br><span class="line"><span class="keyword">while</span> num ~= <span class="number">1</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">% 迭代一次</span></span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">mod</span>(num,<span class="number">2</span>) == <span class="number">0</span></span><br><span class="line">        num = num / <span class="number">2</span>;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        num = num * <span class="number">3</span> + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    iter = iter + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 绘图</span></span><br><span class="line">    <span class="built_in">plot</span>(iter, num, <span class="string">&#x27;ro&#x27;</span>);</span><br><span class="line">    pause(refresh);</span><br><span class="line">    <span class="built_in">hold</span> on;         <span class="comment">% 这里的hold on命令也可省略</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<h3 id="绘制多幅子图像"><a href="#绘制多幅子图像" class="headerlink" title="绘制多幅子图像"></a>绘制多幅子图像</h3><p>有些使用我们需要在同一张图中并列放置多张图像，这时候我们可以使用subplot进行绘制。其主要使用方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">% 绘制m*n排列的子图像中的第p幅</span><br><span class="line">subplot(m, n, p);</span><br><span class="line">plot();</span><br></pre></td></tr></table></figure>
<p>需要注意的是，subplot默认按逐行的方式对子图像进行排列。例如以下代码绘制了函数y=sin(k*x)在不同k值下的图像：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">% 生成绘图数据</span><br><span class="line">x &#x3D; linspace(0,10);</span><br><span class="line">y1 &#x3D; sin(1*x);</span><br><span class="line">y2 &#x3D; sin(2*x);</span><br><span class="line">y3 &#x3D; sin(3*x);</span><br><span class="line">y4 &#x3D; sin(4*x);</span><br><span class="line"></span><br><span class="line">% 绘制2*2排列的子图像</span><br><span class="line">figure;     % 第一次绘制时，figure命令可省略</span><br><span class="line">subplot(2,2,1);</span><br><span class="line">plot(x,y1);</span><br><span class="line">title(&#39;Subplot 1: sin(x)&#39;);</span><br><span class="line"></span><br><span class="line">subplot(2,2,2);</span><br><span class="line">plot(x,y2);</span><br><span class="line">title(&#39;Subplot 2: sin(2x)&#39;);</span><br><span class="line"></span><br><span class="line">subplot(2,2,3);</span><br><span class="line">plot(x,y3);</span><br><span class="line">title(&#39;Subplot 3: sin(3x)&#39;);</span><br><span class="line"></span><br><span class="line">subplot(2,2,4);</span><br><span class="line">plot(x,y4);</span><br><span class="line">title(&#39;Subplot 4: sin(4x)&#39;);</span><br></pre></td></tr></table></figure>

<p>子图像的绘制结果如图所示：<br><img src="/img/matlab/matlab013_plot8.png" alt="plot8"></p>
<h1 id="图像算法"><a href="#图像算法" class="headerlink" title="图像算法"></a>图像算法</h1><blockquote>
<p>参考代码都是可以优化的，下面的只是参考，定位是简单入门。</p>
</blockquote>
<h2 id="图像导入与格式转换"><a href="#图像导入与格式转换" class="headerlink" title="图像导入与格式转换"></a>图像导入与格式转换</h2><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line">close all;</span><br><span class="line"></span><br><span class="line"><span class="comment">%-----读--取--图--片--并--显--示---------</span></span><br><span class="line"><span class="comment">% imread 读一张图片，括号里格式为字符串，这字符串表示你要读取图片的路径</span></span><br><span class="line">img = imread(<span class="string">&#x27;1.jpg&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 函数figure: 建立一个窗口 可以直接用数字去编号：</span></span><br><span class="line"><span class="comment">% figure(1);</span></span><br><span class="line"><span class="comment">% 关于figure的用法参考：https://blog.csdn.net/qq_30387863/article/details/80301996</span></span><br><span class="line"><span class="comment">% 命名编号：括号里两个参数：第一个是指定参数为&#x27;name&#x27;, 第二个写你要起的名字</span></span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;小黑&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">% 函数imshow：显示图片 括号里面是需要显示的图片的名字</span></span><br><span class="line">imshow(img);</span><br><span class="line"></span><br><span class="line"><span class="comment">% -----图--像--的--表--示-----</span></span><br><span class="line"><span class="comment">% 关于图像里面的数据格式，常见的是uint8和double </span></span><br><span class="line"><span class="comment">% 其中，uint8指的是没有符号的整数，即非负整数，double指的是精确度比较高的浮点数</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 彩图和灰度图的转化不是可逆的，彩图到灰度图可以用函数rgb2gray</span></span><br><span class="line">gray = rgb2gray(img);</span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;gray&#x27;</span>);</span><br><span class="line">imshow(gray);</span><br><span class="line"></span><br><span class="line"><span class="comment">% ---保存图片到指定位置---</span></span><br><span class="line"><span class="comment">% 用 imwrite(A,filename) </span></span><br><span class="line"><span class="comment">% 将图像数据 A 写入 filename 指定的文件，并从扩展名推断出文件格式。</span></span><br></pre></td></tr></table></figure>

<h2 id="均值滤波"><a href="#均值滤波" class="headerlink" title="均值滤波"></a>均值滤波</h2><h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><h4 id="均值滤波的代码-code-m"><a href="#均值滤波的代码-code-m" class="headerlink" title="均值滤波的代码:code.m"></a>均值滤波的代码:code.m</h4><figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">示例用的思路是：</span><br><span class="line">选取相邻<span class="number">3</span>x3的范围，用<span class="number">9</span>个数字的平均作为滤波结果，进行赋值。</span><br><span class="line"></span><br><span class="line">均值滤波的两种方法：一个是示例的邻域平均，另一个是根据距离目标像素点的远近乘以加权的系数，叫做加权平均，像高斯滤波就是如此。</span><br></pre></td></tr></table></figure>
<h4 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h4><blockquote>
<p>这篇文章介绍得挺好：</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u010552731/article/details/48162719">均值滤波和中值滤波</a></p>
</blockquote>
<h3 id="代码"><a href="#代码" class="headerlink" title="代码"></a>代码</h3><blockquote>
<p>code.m</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line">close all;</span><br><span class="line"></span><br><span class="line">img = imread(<span class="string">&#x27;1.jpg&#x27;</span>);</span><br><span class="line"></span><br><span class="line">gray = rgb2gray(img);</span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;gray&#x27;</span>);</span><br><span class="line">imshow(gray);</span><br><span class="line"></span><br><span class="line">[m, n] = <span class="built_in">size</span>(gray);</span><br><span class="line"></span><br><span class="line">avg_filter = gray;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">2</span>:m<span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">2</span>:n<span class="number">-1</span></span><br><span class="line">        </span><br><span class="line">        filter_con = gray(<span class="built_in">i</span><span class="number">-1</span>:<span class="built_in">i</span>+<span class="number">1</span>, <span class="built_in">j</span><span class="number">-1</span>:<span class="built_in">j</span>+<span class="number">1</span>);</span><br><span class="line">        k = sum(sum(filter_con))/<span class="number">9</span>;</span><br><span class="line">        avg_filter(<span class="built_in">i</span>, <span class="built_in">j</span>) = k;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;avg_filter&#x27;</span>);</span><br><span class="line">imshow(avg_filter);</span><br></pre></td></tr></table></figure>

<h2 id="sobel算法"><a href="#sobel算法" class="headerlink" title="sobel算法"></a>sobel算法</h2><h3 id="说明-1"><a href="#说明-1" class="headerlink" title="说明"></a>说明</h3><h4 id="文件code-m，"><a href="#文件code-m，" class="headerlink" title="文件code.m，"></a>文件code.m，</h4><p>利用sobel算子可以将图像周围像素灰度有阶跃变化的像素检测出来，这些像素组成的集合就是该图像的边缘。</p>
<p>实现： 分别用检测垂直边缘和检测水平边缘的算子对图像一点作平面卷积，然后开平方得到该点的灰度值。</p>
<h4 id="参考-1"><a href="#参考-1" class="headerlink" title="参考"></a>参考</h4><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Lrrent/article/details/51424447">sobel参考</a>  原理可以，里面参考代码不太行，漏洞太多，以我为准。</p>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/59640437">知乎一篇不错的文章</a></p>
</blockquote>
<h3 id="代码-1"><a href="#代码-1" class="headerlink" title="代码"></a>代码</h3><blockquote>
<p>code.m</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line">close all;</span><br><span class="line"></span><br><span class="line">img = imread(<span class="string">&#x27;1.jpg&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;原图&#x27;</span>);</span><br><span class="line">imshow(img);</span><br><span class="line"></span><br><span class="line">gray = rgb2gray(img);</span><br><span class="line">[m, n] = <span class="built_in">size</span>(gray);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 预设好矩阵大小</span></span><br><span class="line">x_sobel = double(gray);</span><br><span class="line">y_sobel = double(gray);</span><br><span class="line">img_sobel = gray;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">2</span>:m<span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">2</span>:n<span class="number">-1</span></span><br><span class="line">        <span class="comment">% 分别用x、y方向的算子检测边缘，然后合成</span></span><br><span class="line">        <span class="comment">% x_con = [-1,0,1; -2,0,2; -1,0,1];</span></span><br><span class="line">        <span class="comment">% y_con = [-1,-2,-1; 0,0,0; 1,2,1];</span></span><br><span class="line">        x_sobel(<span class="built_in">i</span>,<span class="built_in">j</span>) = (<span class="number">-1</span>*gray(<span class="built_in">i</span><span class="number">-1</span>, <span class="built_in">j</span><span class="number">-1</span>) + gray(<span class="built_in">i</span><span class="number">-1</span>, <span class="built_in">j</span>+<span class="number">1</span>) ... <span class="comment">% 三个省略号表示接着下一行</span></span><br><span class="line">            <span class="number">-2</span>*gray(<span class="built_in">i</span>, <span class="built_in">j</span><span class="number">-1</span>) + <span class="number">2</span>*gray(<span class="built_in">i</span>, <span class="built_in">j</span>+<span class="number">1</span>) ...</span><br><span class="line">            <span class="number">-1</span>*gray(<span class="built_in">i</span>+<span class="number">1</span>, <span class="built_in">j</span><span class="number">-1</span>) + gray(<span class="built_in">i</span>+<span class="number">1</span>, <span class="built_in">j</span>+<span class="number">1</span>));</span><br><span class="line">        </span><br><span class="line">        y_sobel(<span class="built_in">i</span>, <span class="built_in">j</span>) = (<span class="number">-1</span>*gray(<span class="built_in">i</span><span class="number">-1</span>, <span class="built_in">j</span><span class="number">-1</span>) - <span class="number">2</span>*gray(<span class="built_in">i</span><span class="number">-1</span>, <span class="built_in">j</span>) - gray(<span class="built_in">i</span><span class="number">-1</span>, <span class="built_in">j</span>+<span class="number">1</span>) ...</span><br><span class="line">            +gray(<span class="built_in">i</span>+<span class="number">1</span>, <span class="built_in">j</span><span class="number">-1</span>) + <span class="number">2</span>*gray(<span class="built_in">i</span>+<span class="number">1</span>, <span class="built_in">j</span>) + gray(<span class="built_in">i</span>+<span class="number">1</span>, <span class="built_in">j</span>+<span class="number">1</span>));</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">img_sobel = <span class="built_in">sqrt</span>(x_sobel.^<span class="number">2</span> + y_sobel.^<span class="number">2</span>);</span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;img_sobel&#x27;</span>);</span><br><span class="line">imshow(uint8(img_sobel));</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="腐蚀膨胀"><a href="#腐蚀膨胀" class="headerlink" title="腐蚀膨胀"></a>腐蚀膨胀</h2><h3 id="说明-2"><a href="#说明-2" class="headerlink" title="说明"></a>说明</h3><h4 id="文件-code1-m："><a href="#文件-code1-m：" class="headerlink" title="文件 code1.m："></a>文件 code1.m：</h4><p>膨胀，使图像中亮的区域增长 </p>
<p>使用卷积核B对图片A进行卷积运算，求局部最大值，这个卷积核可以有任意的形状和大小，通常是一个方形或者圆形。卷积核B通常有个锚点，通常位于卷积核的中央位置。</p>
<p>随着卷积核扫描图像，计算叠加区域的最大像素值，并将锚点的位置用最大值替换，从而导致图片中亮的区域增长。</p>
<h5 id="文件code2-m"><a href="#文件code2-m" class="headerlink" title="文件code2.m:"></a>文件code2.m:</h5><p>腐蚀，使亮色的区域减少</p>
<h5 id="文件code3-m"><a href="#文件code3-m" class="headerlink" title="文件code3.m:"></a>文件code3.m:</h5><p>开操作, 先腐蚀后膨胀；先膨胀后腐蚀是闭操作；</p>
<p><strong>顶帽操作和底帽操作</strong>是灰度图像所特有的，其原理是开操作将使峰顶消去，具体消去了多少呢，可以用原图减去开操作结果，这样就能得到其消去的部分，而这个过程成为顶帽操作，顶帽就是开操作消去的峰顶，这一部分对应于图像中较亮的部分，也叫白色顶帽。</p>
<p>开运算放大了裂缝或者局部低亮度的区域，所以，从原图中减去开运算后的图，得到的结果突出了比原图轮廓周围的区域更明亮的区域，这个操作与选择的核的大小有关。TopHat运算一般用来分离比邻近点亮一些的斑块，可以使用这个运算提取背景。</p>
<p>同理，底帽操作是用闭操作的结果减去原图就得到被闭操作填充的谷底部分，这一部分对应于图像中较暗的部分，也叫黑色底帽。黑帽运算的结果突出了比原图轮廓周围区域更暗的区域，所以黑帽运算用来分离比邻近点暗一些的斑块。</p>
<h4 id="参考-2"><a href="#参考-2" class="headerlink" title="参考"></a>参考</h4><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012851419/article/details/78026596">参考一</a></p>
<p> <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_41929524/article/details/81187173">参考二</a></p>
<h3 id="代码-2"><a href="#代码-2" class="headerlink" title="代码"></a>代码</h3><blockquote>
<p>code1.m</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line">close all;</span><br><span class="line"></span><br><span class="line">path = <span class="string">&#x27;1.jpg&#x27;</span>;</span><br><span class="line">img = imread(path);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;原图&#x27;</span>)</span><br><span class="line">imshow(img);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 膨胀：这里对灰度图腐蚀，其他类型图像同理</span></span><br><span class="line">gray = rgb2gray(img);</span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;灰度图&#x27;</span>)</span><br><span class="line">imshow(gray);</span><br><span class="line"></span><br><span class="line">[m,n] = <span class="built_in">size</span>(gray);</span><br><span class="line">pz = gray; <span class="comment">% 提前预分配，优化速度</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">2</span> : m<span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">2</span> : n<span class="number">-1</span></span><br><span class="line">        <span class="comment">% con是选了3*3大小的卷积区域，然后腐蚀</span></span><br><span class="line">        con = gray(<span class="built_in">i</span><span class="number">-1</span>:<span class="built_in">i</span>+<span class="number">1</span>, <span class="built_in">j</span><span class="number">-1</span>:<span class="built_in">j</span>+<span class="number">1</span>);</span><br><span class="line">        <span class="comment">% 一次max求每列最大，二次是整体最大</span></span><br><span class="line">        pz(<span class="built_in">i</span>,<span class="built_in">j</span>) = <span class="built_in">max</span>(<span class="built_in">max</span>(con));</span><br><span class="line">        </span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;fs&#x27;</span>);</span><br><span class="line">imshow(pz);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>code2.m</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line">close all;</span><br><span class="line"></span><br><span class="line">path = <span class="string">&#x27;1.jpg&#x27;</span>;</span><br><span class="line">img = imread(path);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;原图&#x27;</span>)</span><br><span class="line">imshow(img);</span><br><span class="line"></span><br><span class="line"><span class="comment">% ----------对--灰--度--图--腐--蚀---------</span></span><br><span class="line"><span class="comment">% gray = rgb2gray(img);</span></span><br><span class="line"><span class="comment">% figure(&#x27;name&#x27;, &#x27;灰度图&#x27;)</span></span><br><span class="line"><span class="comment">% imshow(gray);</span></span><br><span class="line"><span class="comment">% </span></span><br><span class="line"><span class="comment">% [m,n] = size(gray);</span></span><br><span class="line"><span class="comment">% fs = gray; % 提前预分配，优化速度</span></span><br><span class="line"><span class="comment">% for i = 2 : m-1</span></span><br><span class="line"><span class="comment">%     for j = 2 : n-1</span></span><br><span class="line"><span class="comment">%         % con是选了3*3大小的卷积区域，然后腐蚀</span></span><br><span class="line"><span class="comment">%         con = gray(i-1:i+1, j-1:j+1);</span></span><br><span class="line"><span class="comment">%         fs(i,j) = min(min(con));</span></span><br><span class="line"><span class="comment">%         </span></span><br><span class="line"><span class="comment">%     end</span></span><br><span class="line"><span class="comment">% end</span></span><br><span class="line"><span class="comment">% </span></span><br><span class="line"><span class="comment">% figure(&#x27;name&#x27;, &#x27;fs&#x27;);</span></span><br><span class="line"><span class="comment">% imshow(fs);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%------------对--彩--色--图-------------</span></span><br><span class="line">r = img(:, :, <span class="number">1</span>);</span><br><span class="line">g = img(:, :, <span class="number">2</span>);</span><br><span class="line">b = img(:, :, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">[m, n] = <span class="built_in">size</span>(r);</span><br><span class="line"></span><br><span class="line">r_out = r;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">2</span> : m<span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">2</span> : n<span class="number">-1</span></span><br><span class="line">        con = r(<span class="built_in">i</span><span class="number">-1</span>:<span class="built_in">i</span>+<span class="number">1</span>, <span class="built_in">j</span><span class="number">-1</span>:<span class="built_in">j</span>+<span class="number">1</span>);</span><br><span class="line">        r_out(<span class="built_in">i</span>,<span class="built_in">j</span>) = <span class="built_in">min</span>(<span class="built_in">min</span>(con));</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">g_out = g;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">2</span> : m<span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">2</span> : n<span class="number">-1</span></span><br><span class="line">        con = g(<span class="built_in">i</span><span class="number">-1</span>:<span class="built_in">i</span>+<span class="number">1</span>, <span class="built_in">j</span><span class="number">-1</span>:<span class="built_in">j</span>+<span class="number">1</span>);</span><br><span class="line">        g_out(<span class="built_in">i</span>,<span class="built_in">j</span>) = <span class="built_in">min</span>(<span class="built_in">min</span>(con));</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">b_out = b;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">2</span> : m<span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">2</span> : n<span class="number">-1</span></span><br><span class="line">        con = b(<span class="built_in">i</span><span class="number">-1</span>:<span class="built_in">i</span>+<span class="number">1</span>, <span class="built_in">j</span><span class="number">-1</span>:<span class="built_in">j</span>+<span class="number">1</span>);</span><br><span class="line">        b_out(<span class="built_in">i</span>,<span class="built_in">j</span>) = <span class="built_in">min</span>(<span class="built_in">min</span>(con));</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">out = <span class="built_in">cat</span>(<span class="number">3</span>, r_out, g_out, b_out);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;fs_color&#x27;</span>);</span><br><span class="line">imshow(out);</span><br></pre></td></tr></table></figure>
<blockquote>
<p>code3.m</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line">close all;</span><br><span class="line"></span><br><span class="line">path = <span class="string">&#x27;1.jpg&#x27;</span>;</span><br><span class="line">img = imread(path);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;原图&#x27;</span>)</span><br><span class="line">imshow(img);</span><br><span class="line"></span><br><span class="line"><span class="comment">% ----开--运--算------</span></span><br><span class="line">gray = rgb2gray(img);</span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;灰度图&#x27;</span>)</span><br><span class="line">imshow(gray);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 先腐蚀</span></span><br><span class="line">[m,n] = <span class="built_in">size</span>(gray);</span><br><span class="line"></span><br><span class="line">fs = gray; </span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">2</span> : m<span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">2</span> : n<span class="number">-1</span></span><br><span class="line">        con = gray(<span class="built_in">i</span><span class="number">-1</span>:<span class="built_in">i</span>+<span class="number">1</span>, <span class="built_in">j</span><span class="number">-1</span>:<span class="built_in">j</span>+<span class="number">1</span>);</span><br><span class="line">        fs(<span class="built_in">i</span>,<span class="built_in">j</span>) = <span class="built_in">min</span>(<span class="built_in">min</span>(con));</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 后膨胀</span></span><br><span class="line"></span><br><span class="line">pz = fs;</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">2</span> : m<span class="number">-1</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">2</span> : n<span class="number">-1</span></span><br><span class="line">        con = fs(<span class="built_in">i</span><span class="number">-1</span>:<span class="built_in">i</span>+<span class="number">1</span>, <span class="built_in">j</span><span class="number">-1</span>:<span class="built_in">j</span>+<span class="number">1</span>);</span><br><span class="line">        pz(<span class="built_in">i</span>,<span class="built_in">j</span>) = <span class="built_in">max</span>(<span class="built_in">max</span>(con));</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">open_img = pz;</span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;open_img&#x27;</span>);</span><br><span class="line">imshow(open_img);</span><br><span class="line"></span><br><span class="line"><span class="comment">% ------顶--帽:找出多膨胀的那一块亮度--------</span></span><br><span class="line"><span class="comment">% 原图-开运算的图</span></span><br><span class="line">top_hat = gray - open_img;</span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;top_hat&#x27;</span>);</span><br><span class="line">imshow(top_hat);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 备注： 由上面代码变换顺序做一下微调整，便可以得到闭运算、黑帽</span></span><br></pre></td></tr></table></figure>

<h2 id="直方图均衡化"><a href="#直方图均衡化" class="headerlink" title="直方图均衡化"></a>直方图均衡化</h2><h3 id="说明-3"><a href="#说明-3" class="headerlink" title="说明"></a>说明</h3><h4 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h4><p>当图像直方图完全均匀分布的时候，此时图像的熵是最大的（随机变量每个值的概率都相同时，概率最大），图像对比度是最大的。直方图均衡化就是让图像的像素值所组成的直方图均匀分布，达到提高亮度的作用。</p>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">code.m 是用灰度图实现</span><br><span class="line"></span><br><span class="line">code_color.m 是彩色图</span><br><span class="line"></span><br><span class="line">coloraverage.m 是对code_color.m 的写法改进</span><br></pre></td></tr></table></figure>
<h4 id="参考-3"><a href="#参考-3" class="headerlink" title="参考"></a>参考</h4><blockquote>
<p> <a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39830846/article/details/88706557">彩色图像的直方图均衡化，用到了函数，这个不错</a></p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/Charlotte_android/article/details/80977958">直方图的原理</a></p>
</blockquote>
<h3 id="代码-3"><a href="#代码-3" class="headerlink" title="代码"></a>代码</h3><blockquote>
<p>code.m</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">clc</span><br><span class="line">clear</span><br><span class="line">close all;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 读图</span></span><br><span class="line">img = imread(<span class="string">&#x27;1.jpg&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">%灰度图处理</span></span><br><span class="line">gray = rgb2gray(img);</span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;original gray&#x27;</span>);</span><br><span class="line">imshow(gray);</span><br><span class="line"></span><br><span class="line"><span class="comment">%读取灰度图 及直方图</span></span><br><span class="line">[R,C]=<span class="built_in">size</span>(gray);</span><br><span class="line"><span class="comment">% figure(2);</span></span><br><span class="line"><span class="comment">% imhist(I);</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%统计灰度</span></span><br><span class="line">s=<span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">256</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:R</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:C</span><br><span class="line">        s(<span class="number">1</span>,gray(<span class="built_in">i</span>,<span class="built_in">j</span>)+<span class="number">1</span>)=s(<span class="number">1</span>,gray(<span class="built_in">i</span>,<span class="built_in">j</span>)+<span class="number">1</span>)+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%算概率</span></span><br><span class="line">p=<span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">256</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">256</span></span><br><span class="line">    p(<span class="built_in">i</span>)=s(<span class="built_in">i</span>)/(R*C*<span class="number">1.0</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%累计直方图</span></span><br><span class="line">c=<span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">256</span>);</span><br><span class="line">c(<span class="number">1</span>)=p(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">2</span>:<span class="number">256</span></span><br><span class="line">    c(<span class="built_in">i</span>)=c(<span class="built_in">i</span><span class="number">-1</span>)+p(<span class="built_in">i</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">%取整</span></span><br><span class="line"><span class="comment">% c = uint8(255.*c+0.5);</span></span><br><span class="line">c= <span class="built_in">round</span>(<span class="number">255.</span>*c);</span><br><span class="line"><span class="comment">%  均衡</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:R</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:C</span><br><span class="line">        gray(<span class="built_in">i</span>,<span class="built_in">j</span>)=c(gray(<span class="built_in">i</span>,<span class="built_in">j</span>)+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">%8 输出直方图均衡化后的图像</span></span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;out_hisq&#x27;</span>);</span><br><span class="line">imshow(gray);</span><br><span class="line"><span class="comment">% figure(4);</span></span><br><span class="line"><span class="comment">% imhist(I);</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>code_color.m</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br></pre></td><td class="code"><pre><span class="line">clc</span><br><span class="line">clear</span><br><span class="line">close all;</span><br><span class="line"></span><br><span class="line"><span class="comment">% 读图</span></span><br><span class="line">img = imread(<span class="string">&#x27;1.jpg&#x27;</span>);</span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;original image&#x27;</span>);</span><br><span class="line">imshow(img);</span><br><span class="line"></span><br><span class="line"><span class="built_in">figure</span>(<span class="number">12</span>);</span><br><span class="line">imshow(histeq(img, <span class="number">256</span>));</span><br><span class="line"></span><br><span class="line"><span class="comment">%彩图处理</span></span><br><span class="line">r = img(:, :, <span class="number">1</span>);</span><br><span class="line">g = img(:, :, <span class="number">2</span>);</span><br><span class="line">b = img(:, :, <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 获得图像的尺寸大小 </span></span><br><span class="line">[R, C]=<span class="built_in">size</span>(r);</span><br><span class="line"></span><br><span class="line"><span class="comment">% ----分--图--层--处--理------</span></span><br><span class="line"><span class="comment">% ----r----</span></span><br><span class="line">r_out = r;</span><br><span class="line">s = <span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">256</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:R</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:C</span><br><span class="line">        s(<span class="number">1</span>, r_out(<span class="built_in">i</span>,<span class="built_in">j</span>)+<span class="number">1</span>)=s(<span class="number">1</span>, r_out(<span class="built_in">i</span>,<span class="built_in">j</span>)+<span class="number">1</span>)+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%算概率</span></span><br><span class="line">p = <span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">256</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="number">256</span></span><br><span class="line">    p(<span class="built_in">i</span>)=s(<span class="built_in">i</span>)/(R*C*<span class="number">1.0</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%累计直方图</span></span><br><span class="line">c=<span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">256</span>);</span><br><span class="line">c(<span class="number">1</span>)=p(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">2</span>:<span class="number">256</span></span><br><span class="line">    c(<span class="built_in">i</span>)=c(<span class="built_in">i</span><span class="number">-1</span>)+p(<span class="built_in">i</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">%取整</span></span><br><span class="line"><span class="comment">% c = uint8(255.*c+0.5);</span></span><br><span class="line">c= <span class="built_in">round</span>(<span class="number">255.</span>*c);</span><br><span class="line"><span class="comment">%  均衡</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:R</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:C</span><br><span class="line">        r_out(<span class="built_in">i</span>,<span class="built_in">j</span>)=c(r_out(<span class="built_in">i</span>,<span class="built_in">j</span>)+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% -----g-------</span></span><br><span class="line">g_out = g;</span><br><span class="line">s=<span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">256</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:R</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:C</span><br><span class="line">        s(<span class="number">1</span>, g_out(<span class="built_in">i</span>,<span class="built_in">j</span>)+<span class="number">1</span>) = s(<span class="number">1</span>, g_out(<span class="built_in">i</span>,<span class="built_in">j</span>)+<span class="number">1</span>)+<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%算概率</span></span><br><span class="line">p=<span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">256</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">256</span></span><br><span class="line">    p(<span class="built_in">i</span>)=s(<span class="built_in">i</span>)/(R*C*<span class="number">1.0</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%累计直方图</span></span><br><span class="line">c=<span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">256</span>);</span><br><span class="line">c(<span class="number">1</span>)=p(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">2</span>:<span class="number">256</span></span><br><span class="line">    c(<span class="built_in">i</span>)=c(<span class="built_in">i</span><span class="number">-1</span>)+p(<span class="built_in">i</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">%取整</span></span><br><span class="line"><span class="comment">% c = uint8(255.*c+0.5);</span></span><br><span class="line">c= <span class="built_in">round</span>(<span class="number">255.</span>*c);</span><br><span class="line"><span class="comment">%  均衡</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:R</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:C</span><br><span class="line">        g_out(<span class="built_in">i</span>,<span class="built_in">j</span>) = c(g_out(<span class="built_in">i</span>,<span class="built_in">j</span>)+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% -----b-------</span></span><br><span class="line">b_out = b;</span><br><span class="line">s=<span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">256</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:R</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:C</span><br><span class="line">        s(<span class="number">1</span>, b_out(<span class="built_in">i</span>,<span class="built_in">j</span>)+<span class="number">1</span>) = s(<span class="number">1</span>, b_out(<span class="built_in">i</span>,<span class="built_in">j</span>) + <span class="number">1</span>) + <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%算概率</span></span><br><span class="line">p=<span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">256</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">256</span></span><br><span class="line">    p(<span class="built_in">i</span>)=s(<span class="built_in">i</span>)/(R*C*<span class="number">1.0</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">%累计直方图</span></span><br><span class="line">c=<span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">256</span>);</span><br><span class="line">c(<span class="number">1</span>)=p(<span class="number">1</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">2</span>:<span class="number">256</span></span><br><span class="line">    c(<span class="built_in">i</span>)=c(<span class="built_in">i</span><span class="number">-1</span>)+p(<span class="built_in">i</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="comment">%取整</span></span><br><span class="line"><span class="comment">% c = uint8(255.*c+0.5);</span></span><br><span class="line">c= <span class="built_in">round</span>(<span class="number">255.</span>*c);</span><br><span class="line"><span class="comment">%  均衡</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:R</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:C</span><br><span class="line">        b_out(<span class="built_in">i</span>,<span class="built_in">j</span>) = c(b_out(<span class="built_in">i</span>,<span class="built_in">j</span>)+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">out = <span class="built_in">cat</span>(<span class="number">3</span>, r_out, g_out, b_out);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 输出直方图均衡化后的图像</span></span><br><span class="line"><span class="built_in">figure</span>(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;out_hisq&#x27;</span>);</span><br><span class="line">imshow(out);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>coloraverage.m</p>
</blockquote>
<figure class="highlight matlab"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">%主函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">coloraverage</span><span class="params">()</span></span></span><br><span class="line">I=imread(<span class="string">&#x27;1.jpg&#x27;</span>);</span><br><span class="line">imshow(I);</span><br><span class="line">I1=I(:,:,<span class="number">1</span>);<span class="comment">%提取红色分量</span></span><br><span class="line">I2=I(:,:,<span class="number">2</span>);<span class="comment">%提取绿色分量</span></span><br><span class="line">I3=I(:,:,<span class="number">3</span>);<span class="comment">%提取蓝色分量</span></span><br><span class="line">I1=histogram(I1);   <span class="comment">%构造的函数</span></span><br><span class="line">I2=histogram(I2);</span><br><span class="line">I3=histogram(I3);</span><br><span class="line">c=<span class="built_in">cat</span>(<span class="number">3</span>,I1,I2,I3);  <span class="comment">%cat用于构造多维数组</span></span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">1</span>);imshow(I);</span><br><span class="line">subplot(<span class="number">1</span>,<span class="number">2</span>,<span class="number">2</span>);imshow(c);</span><br><span class="line"></span><br><span class="line"><span class="comment">%调用的（直方图均衡化）构造函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">d</span>=<span class="title">histogram</span><span class="params">(I)</span>%构造<span class="title">histogram</span>函数</span></span><br><span class="line">J=I;</span><br><span class="line">[m,n]=<span class="built_in">size</span>(I);      <span class="comment">%确定矩阵大小</span></span><br><span class="line">area=m*n;</span><br><span class="line">a=<span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">256</span>);     <span class="comment">%产生1*256的零矩阵a,用来存放原始图像各个灰度值的个数</span></span><br><span class="line">b=<span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">256</span>);</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:m           <span class="comment">%记录各个灰度值的个数</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:n</span><br><span class="line">        d=I(<span class="built_in">i</span>,<span class="built_in">j</span>)+<span class="number">1</span>;   <span class="comment">%获取(i,j)位置的灰度值(注意：灰度值为0-255，对应矩阵的1-256）</span></span><br><span class="line">        a(<span class="number">1</span>,d)=a(<span class="number">1</span>,d)+<span class="number">1</span>;    <span class="comment">%矩阵a上对应灰度值的计数+1</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:<span class="number">256</span>         <span class="comment">%均衡化</span></span><br><span class="line">    sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:<span class="built_in">i</span></span><br><span class="line">        sum=sum+a(<span class="number">1</span>,<span class="built_in">j</span>);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    b(<span class="number">1</span>,<span class="built_in">i</span>)=sum*<span class="number">255</span>/area;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:m           <span class="comment">%用均衡化后的数据代替原位置的数据</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:n</span><br><span class="line">        d=J(<span class="built_in">i</span>,<span class="built_in">j</span>)+<span class="number">1</span>;</span><br><span class="line">        J(<span class="built_in">i</span>,<span class="built_in">j</span>)=b(<span class="number">1</span>,d);</span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">d=J;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>整理参考来源：</p>
<p>1、<a target="_blank" rel="noopener" href="https://ghh3809.github.io/category/#MATLAB">grammar</a></p>
<p>2、书：数字图像处理，朱虹等著</p>
<p>3、知乎/CSDN等网友的博客贴</p>
</blockquote>
</div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/coding-matlab%E4%B8%8E%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/">coding matlab与图像处理</a></div><div class="sharethis-inline-share-buttons"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5fa886ff320dd168" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/wechat.png" alt="微信"></span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipay.jpg" alt="支付宝"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/11/08/027%20%5B%E5%B7%A5%E7%A8%8B%E7%AE%A1%E7%90%86%5D%E5%B7%A5%E7%A8%8B%E6%B5%8B%E9%87%8F/"><span class="level-item">从工程测量的课程学习到几何直观记录</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="SOHUCS" sid="2020/11/09/matlab/"></div><script charset="utf-8" src="https://changyan.sohu.com/upload/changyan.js"></script><script>window.changyan.api.config({appid: 'cyv98auUy',conf: 'prod_edf9150e78a337763e90a0c95624da85'});</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1 is-sticky"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Lider"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Lider</p><p class="is-size-6 is-block">本科在读</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Xi&#039;an, Shaanxi</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">27</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">14</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/LiBigTree" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/LiBigTree"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E6%8A%80%E6%9C%AF-%E5%9F%BA%E7%A1%80%E5%AD%A6%E7%A7%91/"><span class="level-start"><span class="level-item">技术 基础学科</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%90%86%E8%AE%BA-%E5%B7%A5%E7%A8%8B%E6%8A%80%E6%9C%AF/"><span class="level-start"><span class="level-item">理论 工程技术</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%94%9F%E6%B4%BB-%E5%B9%B4%E8%AE%A1%E5%88%92/"><span class="level-start"><span class="level-item">生活 年计划</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%94%9F%E6%B4%BB-%E6%9C%88%E8%AE%A1%E5%88%92/"><span class="level-start"><span class="level-item">生活 月计划</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%94%9F%E6%B4%BB-%E9%98%85%E8%AF%BB/"><span class="level-start"><span class="level-item">生活 阅读</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BC%96%E7%A8%8B-matlab/"><span class="level-start"><span class="level-item">编程 matlab</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BC%96%E7%A8%8B-python/"><span class="level-start"><span class="level-item">编程 python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">十一月 2020</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">五月 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">四月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">三月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">二月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-09T06:27:32.000Z">2020-11-09</time></p><p class="title"><a href="/2020/11/09/matlab/">matlab</a></p><p class="categories"><a href="/categories/%E7%BC%96%E7%A8%8B-matlab/">编程 matlab</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-08T13:40:13.124Z">2020-11-08</time></p><p class="title"><a href="/2020/11/08/027%20%5B%E5%B7%A5%E7%A8%8B%E7%AE%A1%E7%90%86%5D%E5%B7%A5%E7%A8%8B%E6%B5%8B%E9%87%8F/">从工程测量的课程学习到几何直观记录</a></p><p class="categories"><a href="/categories/%E7%90%86%E8%AE%BA-%E5%B7%A5%E7%A8%8B%E6%8A%80%E6%9C%AF/">理论 工程技术</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-08T13:40:13.115Z">2020-11-08</time></p><p class="title"><a href="/2020/11/08/018%20%E7%AE%A1%E7%90%86%E5%AD%A6%E6%80%BB%E7%BB%93/">管理学</a></p><p class="categories"><a href="/categories/%E6%8A%80%E6%9C%AF-%E5%9F%BA%E7%A1%80%E5%AD%A6%E7%A7%91/">技术 基础学科</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-08T13:40:13.111Z">2020-11-08</time></p><p class="title"><a href="/2020/11/08/014%20%E6%91%84%E5%BD%B1%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/">我的摄影的学习之旅</a></p><p class="categories"><a href="/categories/%E7%94%9F%E6%B4%BB-%E9%98%85%E8%AF%BB/">生活 阅读</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-08T13:40:13.110Z">2020-11-08</time></p><p class="title"><a href="/2020/11/08/013%20%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/">线性代数学习与提升</a></p><p class="categories"><a href="/categories/%E7%90%86%E8%AE%BA-%E5%B7%A5%E7%A8%8B%E6%8A%80%E6%9C%AF/">理论 工程技术</a></p></div></article></div></div><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#基础语法"><span class="level-left"><span class="level-item">1</span><span class="level-item">基础语法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#matlab界面"><span class="level-left"><span class="level-item">1.1</span><span class="level-item">matlab界面</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#命令行窗口"><span class="level-left"><span class="level-item">1.1.1</span><span class="level-item">命令行窗口</span></span></a></li><li><a class="level is-mobile" href="#编辑器"><span class="level-left"><span class="level-item">1.1.2</span><span class="level-item">编辑器</span></span></a></li><li><a class="level is-mobile" href="#菜单栏"><span class="level-left"><span class="level-item">1.1.3</span><span class="level-item">菜单栏</span></span></a></li><li><a class="level is-mobile" href="#变量"><span class="level-left"><span class="level-item">1.1.4</span><span class="level-item">变量</span></span></a></li><li><a class="level is-mobile" href="#当前文件夹-amp-详细信息"><span class="level-left"><span class="level-item">1.1.5</span><span class="level-item">当前文件夹&amp;详细信息</span></span></a></li><li><a class="level is-mobile" href="#工作区"><span class="level-left"><span class="level-item">1.1.6</span><span class="level-item">工作区</span></span></a></li></ul></li><li><a class="level is-mobile" href="#数据类型"><span class="level-left"><span class="level-item">1.2</span><span class="level-item">数据类型</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#基本数据类型"><span class="level-left"><span class="level-item">1.2.1</span><span class="level-item">基本数据类型</span></span></a></li></ul></li><li><a class="level is-mobile" href="#复合数据类型——矩阵"><span class="level-left"><span class="level-item">1.3</span><span class="level-item">复合数据类型——矩阵</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#矩阵的生成–直接输入"><span class="level-left"><span class="level-item">1.3.1</span><span class="level-item">矩阵的生成–直接输入</span></span></a></li><li><a class="level is-mobile" href="#矩阵的生成–函数生成"><span class="level-left"><span class="level-item">1.3.2</span><span class="level-item">矩阵的生成–函数生成</span></span></a></li><li><a class="level is-mobile" href="#矩阵计算"><span class="level-left"><span class="level-item">1.3.3</span><span class="level-item">矩阵计算</span></span></a></li><li><a class="level is-mobile" href="#冒号运算符与矩阵拼接"><span class="level-left"><span class="level-item">1.3.4</span><span class="level-item">冒号运算符与矩阵拼接</span></span></a></li></ul></li><li><a class="level is-mobile" href="#复合数据类型——字符串"><span class="level-left"><span class="level-item">1.4</span><span class="level-item">复合数据类型——字符串</span></span></a></li><li><a class="level is-mobile" href="#复合数据类型——结构体（了解）"><span class="level-left"><span class="level-item">1.5</span><span class="level-item">复合数据类型——结构体（了解）</span></span></a></li><li><a class="level is-mobile" href="#复合结构类型——元胞矩阵（了解）"><span class="level-left"><span class="level-item">1.6</span><span class="level-item">复合结构类型——元胞矩阵（了解）</span></span></a></li><li><a class="level is-mobile" href="#流程控制"><span class="level-left"><span class="level-item">1.7</span><span class="level-item">流程控制</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#顺序执行"><span class="level-left"><span class="level-item">1.7.1</span><span class="level-item">顺序执行</span></span></a></li><li><a class="level is-mobile" href="#条件执行"><span class="level-left"><span class="level-item">1.7.2</span><span class="level-item">条件执行</span></span></a></li><li><a class="level is-mobile" href="#循环执行"><span class="level-left"><span class="level-item">1.7.3</span><span class="level-item">循环执行</span></span></a></li></ul></li><li><a class="level is-mobile" href="#函数"><span class="level-left"><span class="level-item">1.8</span><span class="level-item">函数</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#函数的思想"><span class="level-left"><span class="level-item">1.8.1</span><span class="level-item">函数的思想</span></span></a></li><li><a class="level is-mobile" href="#函数定义"><span class="level-left"><span class="level-item">1.8.2</span><span class="level-item">函数定义</span></span></a></li><li><a class="level is-mobile" href="#函数调用"><span class="level-left"><span class="level-item">1.8.3</span><span class="level-item">函数调用</span></span></a></li><li><a class="level is-mobile" href="#函数变量"><span class="level-left"><span class="level-item">1.8.4</span><span class="level-item">函数变量</span></span></a></li><li><a class="level is-mobile" href="#形参vs实参"><span class="level-left"><span class="level-item">1.8.5</span><span class="level-item">形参vs实参</span></span></a></li><li><a class="level is-mobile" href="#全局变量"><span class="level-left"><span class="level-item">1.8.6</span><span class="level-item">全局变量</span></span></a></li></ul></li><li><a class="level is-mobile" href="#matlab绘图"><span class="level-left"><span class="level-item">1.9</span><span class="level-item">matlab绘图</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#plot函数"><span class="level-left"><span class="level-item">1.9.1</span><span class="level-item">plot函数</span></span></a></li><li><a class="level is-mobile" href="#新建图像和添加图像"><span class="level-left"><span class="level-item">1.9.2</span><span class="level-item">新建图像和添加图像</span></span></a></li><li><a class="level is-mobile" href="#绘制多幅子图像"><span class="level-left"><span class="level-item">1.9.3</span><span class="level-item">绘制多幅子图像</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#图像算法"><span class="level-left"><span class="level-item">2</span><span class="level-item">图像算法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#图像导入与格式转换"><span class="level-left"><span class="level-item">2.1</span><span class="level-item">图像导入与格式转换</span></span></a></li><li><a class="level is-mobile" href="#均值滤波"><span class="level-left"><span class="level-item">2.2</span><span class="level-item">均值滤波</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#说明"><span class="level-left"><span class="level-item">2.2.1</span><span class="level-item">说明</span></span></a></li><li><a class="level is-mobile" href="#代码"><span class="level-left"><span class="level-item">2.2.2</span><span class="level-item">代码</span></span></a></li></ul></li><li><a class="level is-mobile" href="#sobel算法"><span class="level-left"><span class="level-item">2.3</span><span class="level-item">sobel算法</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#说明-1"><span class="level-left"><span class="level-item">2.3.1</span><span class="level-item">说明</span></span></a></li><li><a class="level is-mobile" href="#代码-1"><span class="level-left"><span class="level-item">2.3.2</span><span class="level-item">代码</span></span></a></li></ul></li><li><a class="level is-mobile" href="#腐蚀膨胀"><span class="level-left"><span class="level-item">2.4</span><span class="level-item">腐蚀膨胀</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#说明-2"><span class="level-left"><span class="level-item">2.4.1</span><span class="level-item">说明</span></span></a></li><li><a class="level is-mobile" href="#代码-2"><span class="level-left"><span class="level-item">2.4.2</span><span class="level-item">代码</span></span></a></li></ul></li><li><a class="level is-mobile" href="#直方图均衡化"><span class="level-left"><span class="level-item">2.5</span><span class="level-item">直方图均衡化</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#说明-3"><span class="level-left"><span class="level-item">2.5.1</span><span class="level-item">说明</span></span></a></li><li><a class="level is-mobile" href="#代码-3"><span class="level-left"><span class="level-item">2.5.2</span><span class="level-item">代码</span></span></a></li></ul></li></ul></li></ul></div></div><style>#toc .menu-list > li > a.is-active + .menu-list { display: block; }#toc .menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">修炼理工解构的能力</a><p class="is-size-7"><span>&copy; 2020 Lider</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>