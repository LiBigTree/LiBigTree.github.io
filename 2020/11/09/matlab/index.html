<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>matlab(复制粘贴，还未排版) - 长夜未央</title><link rel="manifest" href="/manifest.json"><meta name="application-name" content="test1"><meta name="msapplication-TileImage" content="/img/favicon.svg"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="test1"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="本篇内容是我用matlab学习图像处理的记录 Q:如何学习一个新概念？ A:我会找个教程&amp;#x2F;文档例子，把代码逐行敲一遍，感觉就像是我自己写的一样，一旦完成，我会从头重写一遍，添加注释，并根据自己的用例修改它。"><meta property="og:type" content="blog"><meta property="og:title" content="matlab(复制粘贴，还未排版)"><meta property="og:url" content="lider7214.cn/2020/11/09/matlab/"><meta property="og:site_name" content="长夜未央"><meta property="og:description" content="本篇内容是我用matlab学习图像处理的记录 Q:如何学习一个新概念？ A:我会找个教程&amp;#x2F;文档例子，把代码逐行敲一遍，感觉就像是我自己写的一样，一旦完成，我会从头重写一遍，添加注释，并根据自己的用例修改它。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="/img/og_image.png"><meta property="article:published_time" content="2020-11-09T06:27:32.000Z"><meta property="article:modified_time" content="2020-11-09T07:09:16.892Z"><meta property="article:author" content="Lider"><meta property="article:tag" content="coding matlab与图像处理"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/img/og_image.png"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"lider7214.cn/2020/11/09/matlab/"},"headline":"长夜未央","image":["/img/og_image.png"],"datePublished":"2020-11-09T06:27:32.000Z","dateModified":"2020-11-09T07:09:16.892Z","author":{"@type":"Person","name":"Lider"},"description":"本篇内容是我用matlab学习图像处理的记录 Q:如何学习一个新概念？ A:我会找个教程&#x2F;文档例子，把代码逐行敲一遍，感觉就像是我自己写的一样，一旦完成，我会从头重写一遍，添加注释，并根据自己的用例修改它。"}</script><link rel="canonical" href="lider7214.cn/2020/11/09/matlab/"><link rel="icon" href="/img/favicon.svg"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.12.0/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/atom-one-light.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?5a8d2d47f84bcec8724f075dc6c2565f";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><meta name="msvalidate.01" content="BC710780EACEE1790CD67974775D934D"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><meta name="generator" content="Hexo 5.0.2"><link rel="alternate" href="/atom.xml" title="长夜未央" type="application/atom+xml">
</head><body class="is-3-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/">修炼理工解构的能力</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">Home</a><a class="navbar-item" href="/archives">Archives</a><a class="navbar-item" href="/categories">Categories</a><a class="navbar-item" href="/tags">Tags</a><a class="navbar-item" href="/about">About</a></div><div class="navbar-end"><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen"><div class="card"><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-11-09T06:27:32.000Z" title="2020-11-09T06:27:32.000Z">2020-11-09</time>发表</span><span class="level-item"><time dateTime="2020-11-09T07:09:16.892Z" title="2020-11-09T07:09:16.892Z">2020-11-09</time>更新</span><span class="level-item"><a class="link-muted" href="/categories/%E7%BC%96%E7%A8%8B-matlab/">编程 matlab</a></span><span class="level-item">32 分钟读完 (大约4819个字)</span></div></div><h1 class="title is-3 is-size-4-mobile">matlab(复制粘贴，还未排版)</h1><div class="content"><p>本篇内容是我用matlab学习图像处理的记录</p>
<p>Q:如何学习一个新概念？</p>
<p>A:我会找个教程/文档例子，把代码逐行敲一遍，感觉就像是我自己写的一样，一旦完成，我会从头重写一遍，添加注释，并根据自己的用例修改它。</p>
<a id="more"></a>
<h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>“图像处理”这四个字，颠倒过来便是处理图像，如何处理图像便是培训核心的出发点。</p>
<p>第一步，我们需要了解”图像”，知道了图像是什么，如何用软件操作图像，才能 有后面的一切可能。</p>
<p>而之后，我们会了解图像就是按照一种规则排列的数字集合（矩阵），我们 也会学习用matlab和python操作图像。</p>
<p>通过第一步，对图像和编程有了一个初步的印象，我们的第二步就会着眼于“处 理”——使用何种方式处理图像能达到我们想要的目的呢？</p>
<p>就是算法。而在处理上，会通过培训传达两条处理线，数学函数和卷积。数学函 数更多涉及了传统的图像处理方法，在卷积这条线上会从传统的图像处理算法讲到人工智能。</p>
<p>接着展开说说这两条线：</p>
<p>第一条线：数学变换处理原图。图像即按某种特定规则排列的数字组合，那以一 种规则去处理图像，在原有的规则上变换，就能达到处理图像的效果。可以理解 为数学里x到f(x)的映射。 核心是其中的映射规则f，不同的规则映射到不同的效果。在培训中，我们讲的直方图均衡，这便是一种数学变换，通过概率论的方法 使图像呈现均匀分布，从而达到提高对比度效果。还有许多，例如图像缩放、确 定阈值分割图像等等都是数学变换的应用。</p>
<p>第二条线：卷积处理。这里说卷积其实是一种不太严谨的归纳方法，但因为图 像、人工智能在处理方法上的思想都可以看作是卷积，所以我们在学习过程中就 可以把这个归纳成一条线，后面的学习过程会慢慢体会到里面的细微内容。<br>首先在传统图像算法中，我们用filter滤波器处理图像，我们通过不同的滤波器 处理图像，提取不同的信息，从而达到我们想要的效果。</p>
<p>具体到培训，腐蚀膨胀里给原图加了一个max、 min(与 、或)的滤波器，就输出了我们想要的腐蚀膨胀图。在sobel算法里，我们加了x和y方向的梯度子(过滤器)，就达到了检测图像边缘的目的。还有更多的处理，其内核就是不同滤波器  的应用。<br>滤波器之于图像，就像：假设原来我们通过裸眼看到一副阳光刺眼的画面，觉得 难受。而加上滤波器就相当于去戴个墨镜看该画面，瞬间看到了图像变了。<br>不严谨地形象理解，滤波器的处理像是给处理的图像去戴上墨镜，从而输出不一 样的画面。<br>继续深入，我们开始学习人工智能…</p>
<p>说了这么多，这两条线也不是独立存在，他们都是为解决我们的问题、达到我们 想要的效果而服务的，所以很多处理中可能就是两条线中内核的组合，组合拳虽然不好掌握，但效果也有其独到之处。</p>
<h1 id="正文"><a href="#正文" class="headerlink" title="正文"></a>正文</h1><h2 id="图像导入与格式转换"><a href="#图像导入与格式转换" class="headerlink" title="图像导入与格式转换"></a>图像导入与格式转换</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">clc; </span><br><span class="line">clear; </span><br><span class="line">close all; </span><br><span class="line">%-----读--取--图--片--并--显--示--------- % imread 读去一张图片，括号里格式为字符串，这字符串表示你要读取图片 的路径 img &#x3D; imread(&#39;1.jpg&#39;); % 函数figure: 建立一个窗口 可以直接用数字去编号： % figure(1); % 关于figure的用法参考： https:&#x2F;&#x2F;blog.csdn.net&#x2F;qq_30387863&#x2F;article&#x2F;details&#x2F;80301996 % 命名编号：括号里两个参数：第一个是指定参数为&#39;name&#39;, 第二个写你要起 的名字 figure(&#39;name&#39;, &#39;小黑&#39;) % 函数imshow：显示图片 括号里面是需要显示的图片的名字 imshow(img); % -----图--像--的--表--示----- % 关于图像里面的数据格式，常见的是uint8和double % 其中，uint8指的是没有符号的整数，即非负整数，double指的是精确度比较 高的浮点数 % 彩图和灰度图的转化不是可逆的，彩图到灰度图可以用函数rgb2gray gray &#x3D; rgb2gray(img); figure(&#39;name&#39;, &#39;gray&#39;); imshow(gray); % ---保存图片到指定位置--- % 用 imwrite(A,filename) % 将图像数据 A 写入 filename 指定的文件，并从扩展名推断出文件格式。 3</span><br><span class="line">二、图像增强——直方图均衡化 1、原理说明 当图像直方图完全均匀分布的时候，此时图像的熵是最大的（随机变量每个值的 概率都 相同时，概率最大），图像对比度是最大的。直方图均衡化就是让图像的 像素值所组成 的直方图均匀分布，达到提高亮度的作用。 code.m 是用灰度图实现 code_color.m 是彩色图 coloraverage.m 是对code_color.m 的写法改进 参考 彩色图像的直方图均衡化，用到了函数，这个不错 直方图的原理 2、算法实现 4</span><br><span class="line">5 clc clear close all; % 读图 img &#x3D; imread(&#39;1.jpg&#39;); figure(&#39;name&#39;, &#39;original image&#39;); imshow(img); figure(12); imshow(histeq(img, 256)); %彩图处理 r &#x3D; img(:, :, 1); g &#x3D; img(:, :, 2); b &#x3D; img(:, :, 3); %统计灰度 s&#x3D;zeros(1,256); for i&#x3D;1:R for j&#x3D;1:C s(1,gray(i,j)+1)&#x3D;s(1,gray(i,j)+1)+1; end end %算概率 p&#x3D;zeros(1,256); for i&#x3D;1:256 p(i)&#x3D;s(i)&#x2F;(R*C*1.0); end %累计直方图 c&#x3D;zeros(1,256); c(1)&#x3D;p(1); for i&#x3D;2:256 c(i)&#x3D;c(i-1)+p(i); end %取整 % c &#x3D; uint8(255.*c+0.5); c&#x3D; round(255.*c); % 均衡 for i&#x3D;1:R for j&#x3D;1:C gray(i,j)&#x3D;c(gray(i,j)+1); end end %8 输出直方图均衡化后的图像 figure(&#39;name&#39;, &#39;out_hisq&#39;); imshow(gray); % figure(4); % imhist(I);</span><br><span class="line">6 % 获得图像的尺寸大小 [R, C]&#x3D;size(r); % ----分--图--层--处--理------ % ----r---- r_out &#x3D; r; s &#x3D; zeros(1,256); for i &#x3D; 1:R for j&#x3D;1:C s(1, r_out(i,j)+1)&#x3D;s(1, r_out(i,j)+1)+1; end end %算概率 p &#x3D; zeros(1,256); for i &#x3D; 1:256 p(i)&#x3D;s(i)&#x2F;(R*C*1.0); end %累计直方图 c&#x3D;zeros(1,256); c(1)&#x3D;p(1); for i&#x3D;2:256 c(i)&#x3D;c(i-1)+p(i); end %取整 % c &#x3D; uint8(255.*c+0.5); c&#x3D; round(255.*c); % 均衡 for i&#x3D;1:R for j&#x3D;1:C r_out(i,j)&#x3D;c(r_out(i,j)+1); end end % -----g------- g_out &#x3D; g; s&#x3D;zeros(1,256); for i&#x3D;1:R for j&#x3D;1:C s(1, g_out(i,j)+1) &#x3D; s(1, g_out(i,j)+1)+1; end end %算概率 p&#x3D;zeros(1,256); for i&#x3D;1:256 p(i)&#x3D;s(i)&#x2F;(R*C*1.0); end</span><br><span class="line">%累计直方图 7</span><br><span class="line">8 c&#x3D;zeros(1,256); c(1)&#x3D;p(1); for i&#x3D;2:256 c(i)&#x3D;c(i-1)+p(i); end %取整 % c &#x3D; uint8(255.*c+0.5); c&#x3D; round(255.*c); % 均衡 for i&#x3D;1:R for j&#x3D;1:C g_out(i,j) &#x3D; c(g_out(i,j)+1); end end % -----b------- b_out &#x3D; b; s&#x3D;zeros(1,256); for i&#x3D;1:R for j&#x3D;1:C s(1, b_out(i,j)+1) &#x3D; s(1, b_out(i,j) + 1) + 1; end end %算概率 p&#x3D;zeros(1,256); for i&#x3D;1:256 p(i)&#x3D;s(i)&#x2F;(R*C*1.0); end %累计直方图 c&#x3D;zeros(1,256); c(1)&#x3D;p(1); for i&#x3D;2:256 c(i)&#x3D;c(i-1)+p(i); end %取整 % c &#x3D; uint8(255.*c+0.5); c&#x3D; round(255.*c); % 均衡 for i &#x3D; 1:R for j &#x3D; 1:C b_out(i,j) &#x3D; c(b_out(i,j)+1); end end out &#x3D; cat(3, r_out, g_out, b_out); % 输出直方图均衡化后的图像 figure(&#39;name&#39;, &#39;out_hisq&#39;); imshow(out);</span><br><span class="line">9 d&#x3D;I(i,j)+1; %获取(i,j)位置的灰度值(注意：灰度值为0- 255，对应矩阵的1-256） a(1,d)&#x3D;a(1,d)+1; %矩阵a上对应灰度值的计数+1 end end for i&#x3D;1:256 %均衡化 sum&#x3D;0; for j&#x3D;1:i sum&#x3D;sum+a(1,j); end b(1,i)&#x3D;sum*255&#x2F;area; end for i&#x3D;1:m %用均衡化后的数据代替原位置的数据 for j&#x3D;1:n d&#x3D;J(i,j)+1; J(i,j)&#x3D;b(1,d); end end d&#x3D;J; %产生1*256的零矩阵a,用来存放原始图像各个灰度 %记录各个灰度值的个数 %确定矩阵大小 [m,n]&#x3D;size(I); area&#x3D;m*n; a&#x3D;zeros(1,256); 值的个数 b&#x3D;zeros(1,256); for i&#x3D;1:m for j&#x3D;1:n %调用的（直方图均衡化）构造函数 function d&#x3D;histogram(I)%构造histogram函数 J&#x3D;I; %主函数 function coloraverage() I&#x3D;imread(&#39;1.jpg&#39;); imshow(I); I1&#x3D;I(:,:,1);%提取红色分量 I2&#x3D;I(:,:,2);%提取绿色分量 I3&#x3D;I(:,:,3);%提取蓝色分量 I1&#x3D;histogram(I1); %构造的函数 I2&#x3D;histogram(I2); I3&#x3D;histogram(I3); c&#x3D;cat(3,I1,I2,I3); %cat用于构造多维数组 subplot(1,2,1);imshow(I); subplot(1,2,2);imshow(c); </span><br><span class="line"></span><br><span class="line">函数实现</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">图像噪声的抑制——均值滤波 </span><br><span class="line"></span><br><span class="line">1、算法说明 示例用的思路是： 选取相邻3x3的范围，用9个数字的平均作为滤波结果，进行赋值。 均值滤波的两种方法：一个是示例的邻域平均，另一个是根据距离目标像素点的 远近乘以加权的系数，叫做加权平均，像高斯滤波就是如此。 参考 这篇文章介绍得挺好： 均值滤波和中值滤波 2、代码实现 clc; clear; close all; img &#x3D; imread(&#39;1.jpg&#39;); gray &#x3D; rgb2gray(img); figure(&#39;name&#39;, &#39;gray&#39;); imshow(gray); [m, n] &#x3D; size(gray); avg_filter &#x3D; gray; for i &#x3D; 2:m-1 for j &#x3D; 2:n-1 filter_con &#x3D; gray(i-1:i+1, j-1:j+1); k &#x3D; sum(sum(filter_con))&#x2F;9; avg_filter(i, j) &#x3D; k; end end figure(&#39;name&#39;, &#39;avg_filter&#39;); imshow(avg_filter); 11</span><br><span class="line">12 clc; clear; close all; img &#x3D; imread(&#39;1.jpg&#39;); figure(&#39;name&#39;, &#39;原图&#39;); imshow(img); gray &#x3D; rgb2gray(img); [m, n] &#x3D; size(gray); % 预设好矩阵大小 x_sobel &#x3D; double(gray); y_sobel &#x3D; double(gray); img_sobel &#x3D; gray; for i &#x3D; 2:m-1 for j &#x3D; 2:n-1 % 分别用x、y方向的算子检测边缘，然后合成 % x_con &#x3D; [-1,0,1; -2,0,2; -1,0,1]; % y_con &#x3D; [-1,-2,-1; 0,0,0; 1,2,1]; x_sobel(i,j) &#x3D; (-1*gray(i-1, j-1) + gray(i-1, j+1) ... % 三个省略号表示接着下一行 -2*gray(i, j-1) + 2*gray(i, j+1) ... -1*gray(i+1, j-1) + gray(i+1, j+1)); y_sobel(i, j) &#x3D; (-1*gray(i-1, j-1) - 2*gray(i-1, j) - gray(i-1, j+1) ... +gray(i+1, j-1) + 2*gray(i+1, j) + gray(i+1, j+1));end end img_sobel &#x3D; sqrt(x_sobel.^2 + y_sobel.^2); figure(&#39;name&#39;, &#39;img_sobel&#39;); imshow(uint8(img_sobel)); 五、图像的锐化处理——sobel算子原理 1、简述 利用sobel算子可以将图像周围像素灰度有阶跃变化的像素检测出来，这些像素 组成的 集合就是该图像的边缘。 实现： 分别用检测垂直边缘和检测水平边缘的算子对图像一点作平面卷积，然后开平方 得到该点的灰度值。 参考 sobel参考 原理可以，里面参考代码不太行，漏洞太多，以我为准。 知乎一篇不错的文章 </span><br><span class="line"></span><br><span class="line">2、代码实现</span><br><span class="line">13 clear; close all; path &#x3D; &#39;1.jpg&#39;; img &#x3D; imread(path); figure(&#39;name&#39;, &#39;原图&#39;) imshow(img); % 膨胀：这里对灰度图腐蚀，其他类型图像同理 gray &#x3D; rgb2gray(img); figure(&#39;name&#39;, &#39; 灰 度 图 &#39;) imshow(gray); 六、二值图像的处理——腐蚀膨胀、开运算闭运 算 1、原理 编程参考 膨胀，使图像中亮的区域增长 使用卷积核B对图片A进行卷积运算，求局部最大值，这个卷积核可以有任意的 形状和大小，通常是一个方形或者圆形。卷积核B通常有个锚点，通常位于卷积 核的中央位置。 随着卷积核扫描图像，计算叠加区域的最大像素值，并将锚点的位置用最大值替 换，从而导致图片中亮的区域增长。 开操作, 先腐蚀后膨胀；先膨胀后腐蚀是闭操作； 顶帽操作和底帽操作是灰度图像所特有的，其原理是开操作将使峰顶消去，具 体消去了多少呢，可以用原图减去开操作结果，这样就能得到其消去的部分，而 这个过程成为顶帽操作，顶帽就是开操作消去的峰顶，这一部分对应于图像中较 亮的部分，也叫白色顶帽。 开运算放大了裂缝或者局部低亮度的区域，所以，从原图中减去开运算后的图， 得到的结果突出了比原图轮廓周围的区域更明亮的区域，这个操作与选择的核的 大小有关。TopHat运算一般用来分离比邻近点亮一些的斑块，可以使用这个运 算提取背景。 同理，底帽操作是用闭操作的结果减去原图就得到被闭操作填充的谷底部分，这 一部分对应于图像中较暗的部分，也叫黑色底帽。黑帽运算的结果突出了比原图 轮廓周围区域更暗的区域，所以黑帽运算用来分离比邻近点暗一些的斑块。 </span><br><span class="line"></span><br><span class="line">参考一 参考二 </span><br><span class="line"></span><br><span class="line">2、matlab代码</span><br><span class="line">&#96;&#96;&#96;r_out &#x3D; r; [m, n] &#x3D; size(r); </span><br><span class="line">%------------对--彩--色--图------------- </span><br><span class="line">r &#x3D; img(:, :, 1); g &#x3D; img(:, :, 2); b &#x3D; img(:, :, 3); % figure(&#39;name&#39;, &#39;fs&#39;); % imshow(fs); end for j &#x3D; 2 : n-1 % con是选了3*3大小的卷积区域，然后腐蚀 con &#x3D; gray(i-1:i+1, j-1:j+1); fs(i,j) &#x3D; min(min(con)); %%%%%%% end %% ------对--灰--度--图--腐--蚀----- % gray &#x3D; rgb2gray(img); % figure(&#39;name&#39;, &#39;灰度图&#39;) % imshow(gray); %% [m,n] &#x3D; size(gray); % fs &#x3D; gray; % 提前预分配，优化速度 % for i &#x3D; 2 : m-1 figure(&#39;name&#39;, &#39;原图&#39;) imshow(img); path &#x3D; &#39;1.jpg&#39;; img &#x3D; imread(path); clear; close all; [m,n] &#x3D; size(gray); pz &#x3D; gray; % 提前预分配，优化速度 for i &#x3D; 2 : m-1 for j &#x3D; 2 : n-1 </span><br><span class="line">% con是选了3*3大小的卷积区域，然后腐蚀 con &#x3D; gray(i-1:i+1, j-1:j+1); % 一次max求每列最大，二次是整体最大 pz(i,j) &#x3D; max(max(con)); end end figure(&#39;name&#39;, &#39;fs&#39;); imshow(pz);</span><br></pre></td></tr></table></figure>


<pre><code>clc; clear; close all; path = &apos;1.jpg&apos;; img = imread(path); figure(&apos;name&apos;, &apos;原图&apos;) imshow(img); % ----开--运--算------ gray = rgb2gray(img); figure(&apos;name&apos;, &apos;灰度图&apos;) imshow(gray); % 先腐蚀 [m,n] = size(gray); fs = gray; for i = 2 : m-1 for j = 2 : n-1 con = gray(i-1:i+1, j-1:j+1); fs(i,j) = min(min(con)); for i = 2 : m-1 for j = 2 : n-1 con = r(i-1:i+1, j-1:j+1); r_out(i,j) = min(min(con)); end end g_out = g; for i = 2 : m-1 for j = 2 : n-1 con = g(i-1:i+1, j-1:j+1); g_out(i,j) = min(min(con)); end end b_out = b; for i = 2 : m-1 for j = 2 : n-1 con = b(i-1:i+1, j-1:j+1); b_out(i,j) = min(min(con)); end end out = cat(3, r_out, g_out, b_out); figure(&apos;name&apos;, &apos;fs_color&apos;); imshow(out);
16 end end % 后膨胀 pz = fs; for i = 2 : m-1 for j = 2 : n-1 con = fs(i-1:i+1, j-1:j+1); pz(i,j) = max(max(con)); end end open_img = pz; figure(&apos;name&apos;, &apos;open_img&apos;); imshow(open_img); % ------顶--帽:找出多膨胀的那一块亮度-------- % 原图-开运算的图 top_hat = gray - open_img; figure(&apos;name&apos;, &apos;top_hat&apos;); imshow(top_hat); % 备注： 由上面代码变换顺序做一下微调整，便可以得到闭运算、黑帽

# 附录（matlab基础） 

&gt;参考：https://ghh3809.github.io/category/#MATLAB 

## matlab使用 

1）MATLAB 运算符 （Operators）算术）: + - / ^关于优先级由高到低排： 

1） Parenthesis () 括号优先级别最高2） Power (^) 幂 

3） Multiplication and division ( , /) 乘、 除 

4） Addition and subtraction (+, -) 加、 减 2）变量（Variables） 用等号来宣告变量，例如 ： a = 2； 就是宣告了a 这个变量，且它的值是2.

3）数据类型 (Numeric Variable (Data) Type) 逻辑型（logical） 该类型变量值为1或0。 字符型（char） Matlab的字符型输入需使用单引号，字符串存储为字符数组，每个元素占一个 ASCII字符。 数值型（numeric） 又分为：整型（int），单精度浮点型（single）和双精度浮点型（double）。 元胞数组（cell） Matlab的元胞数组可存储任意类型和维度的数组。访问元胞数组的变量需使用大 括号&#123;&#125;。 

结构体（structure） Matlab中的结构体与C语言类似，一个结构体可以通过不同字段存储不同类型的 数据。 

表格（table） 表格可以包含不同类型的数组，用于存储表格类的数据。 函数句柄（function handle） 函数句柄可用于间接调用一个函数的Matlab值或数据类型。 

4）matlab界面 □matlab 界面介绍 工作区 ： 显示当前变量 功能区： 执行相关操作 文件夹： 看文件内容 命令行窗口：对计算机直接下达指令并执行的地方 □命令行窗口的操作 a = 10 b = 10; 这两个有什么区别呢 ——试着在matlab命令行窗口打出来 （我们可以看出，有了 ； 是对一个语句终止，它的信息不显示在命令行窗口。 □↑ 向上的箭头可重复之前的操作 * 当不清楚一个功能时，在命令行窗口输入用 help + 查询函数会有官方解释，（网上查也是一种选 择）*有用的函数指令 □clc: 清空命令行窗口 □clear: 清空工作变量区的所有变量 □close all； 关闭建立的所有窗口 


5）数组（向量和矩阵） Array (Vector and Matrix) 向量和矩阵 行向量 Row vector: a = [1 2 3 4] 列向量 Column vector: b= [1; 2; 3; 4] 矩阵的运算及索引 这个知识点计划以实例切入讲解，就不在这里打了（懒）。 想深入学习的同学可参考下面连接： 矩阵索引|重要 6）脚本文件 脚本文件 创建一个 xx.m 文件进行连续的处理，在命令行中都是一句一句的交互。 19
7）控制语句和逻辑判断 三大控制逻辑： 顺序、循环、判断。 我们写的程序便是基于这三种逻辑的嵌套。 这里介绍最常用的for （循环）、while（循环）、if（判断）、switch（判断） 循环语句 while 条件为真执行此处指令end ---------- for 变量 = 开始 : 变化量（默认1时不打） : 结束 需要执行的命令 end 判断语句 if 条件1为正则 执行 指令1 elseif 条件2为正 执行指令2 else 否则 执行条件3 end switch 判断表达 case 满足case1 执行此case下的指令 case 满足case2 执行此case下的指令 ……otherwise 否则 执行此指令 end 逻辑判断 &lt; 小于 &lt;= 小于等于 &gt; 大于 &gt;= 大于等于 == 等于 ~= 不等于 20
&amp;&amp; 且 || 或 21


8）变量预分配 （尤其循环语句之前） 在对矩阵进行计算时，预设矩阵的大小会加快运算速度。因为这样每次计算时系 统就不用就算矩阵大小并分配空间了。 


9)函数 * 函数定义： 了解了函数的作用之后，我们就需要了解如何对函数进行定义。MATLAB中的函数定义包 括function保留字、输出变量、函数名、输入参数、函数体几部分： % function为保留字，out1~outN为函数输出，function_name为函数名， para1~paraN为输入参数 function [out1, out2, outN] = function_name(para1, para2, paraN) Statements end 定义函数时，一般通过建立单独的函数m文件进行编写 *调用函数： [out1, out2, outN] = function_name(para1, para2, paraN) 2、matlab安装 参考：http://www.360doc.cn/article/27698033_595899862.html 22</code></pre></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/coding-matlab%E4%B8%8E%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/">coding matlab与图像处理</a></div><div class="sharethis-inline-share-buttons"></div><script src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5fa886ff320dd168" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/wechat.png" alt="微信"></span></a><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipay.jpg" alt="支付宝"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/11/08/027%20%5B%E5%B7%A5%E7%A8%8B%E7%AE%A1%E7%90%86%5D%E5%B7%A5%E7%A8%8B%E6%B5%8B%E9%87%8F/"><span class="level-item">从工程测量的课程学习到几何直观记录</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div id="SOHUCS" sid="2020/11/09/matlab/"></div><script charset="utf-8" src="https://changyan.sohu.com/upload/changyan.js"></script><script>window.changyan.api.config({appid: 'cyv98auUy',conf: 'prod_edf9150e78a337763e90a0c95624da85'});</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-3-widescreen  order-1"><div class="card widget" data-type="profile"><div class="card-content"><nav class="level"><div class="level-item has-text-centered flex-shrink-1"><div><figure class="image is-128x128 mx-auto mb-2"><img class="avatar" src="/img/avatar.png" alt="Lider"></figure><p class="title is-size-4 is-block" style="line-height:inherit;">Lider</p><p class="is-size-6 is-block">本科在读</p><p class="is-size-6 is-flex justify-content-center"><i class="fas fa-map-marker-alt mr-1"></i><span>Xi&#039;an, Shaanxi</span></p></div></div></nav><nav class="level is-mobile"><div class="level-item has-text-centered is-marginless"><div><p class="heading">文章</p><a href="/archives"><p class="title">27</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">分类</p><a href="/categories"><p class="title">7</p></a></div></div><div class="level-item has-text-centered is-marginless"><div><p class="heading">标签</p><a href="/tags"><p class="title">14</p></a></div></div></nav><div class="level"><a class="level-item button is-primary is-rounded" href="https://github.com/LiBigTree" target="_blank" rel="noopener">关注我</a></div><div class="level is-mobile"><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="Github" href="https://github.com/LiBigTree"><i class="fab fa-github"></i></a><a class="level-item button is-transparent is-marginless" target="_blank" rel="noopener" title="RSS" href="/atom.xml"><i class="fas fa-rss"></i></a></div></div></div><!--!--><div class="card widget" data-type="categories"><div class="card-content"><div class="menu"><h3 class="menu-label">分类</h3><ul class="menu-list"><li><a class="level is-mobile" href="/categories/%E6%8A%80%E6%9C%AF-%E5%9F%BA%E7%A1%80%E5%AD%A6%E7%A7%91/"><span class="level-start"><span class="level-item">技术 基础学科</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%90%86%E8%AE%BA-%E5%B7%A5%E7%A8%8B%E6%8A%80%E6%9C%AF/"><span class="level-start"><span class="level-item">理论 工程技术</span></span><span class="level-end"><span class="level-item tag">6</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%94%9F%E6%B4%BB-%E5%B9%B4%E8%AE%A1%E5%88%92/"><span class="level-start"><span class="level-item">生活 年计划</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%94%9F%E6%B4%BB-%E6%9C%88%E8%AE%A1%E5%88%92/"><span class="level-start"><span class="level-item">生活 月计划</span></span><span class="level-end"><span class="level-item tag">11</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%94%9F%E6%B4%BB-%E9%98%85%E8%AF%BB/"><span class="level-start"><span class="level-item">生活 阅读</span></span><span class="level-end"><span class="level-item tag">5</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BC%96%E7%A8%8B-matlab/"><span class="level-start"><span class="level-item">编程 matlab</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/categories/%E7%BC%96%E7%A8%8B-python/"><span class="level-start"><span class="level-item">编程 python</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="archives"><div class="card-content"><div class="menu"><h3 class="menu-label">归档</h3><ul class="menu-list"><li><a class="level is-mobile" href="/archives/2020/11/"><span class="level-start"><span class="level-item">十一月 2020</span></span><span class="level-end"><span class="level-item tag">14</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/09/"><span class="level-start"><span class="level-item">九月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/08/"><span class="level-start"><span class="level-item">八月 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/07/"><span class="level-start"><span class="level-item">七月 2020</span></span><span class="level-end"><span class="level-item tag">2</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/06/"><span class="level-start"><span class="level-item">六月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/05/"><span class="level-start"><span class="level-item">五月 2020</span></span><span class="level-end"><span class="level-item tag">3</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/04/"><span class="level-start"><span class="level-item">四月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/03/"><span class="level-start"><span class="level-item">三月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li><li><a class="level is-mobile" href="/archives/2020/02/"><span class="level-start"><span class="level-item">二月 2020</span></span><span class="level-end"><span class="level-item tag">1</span></span></a></li></ul></div></div></div><div class="card widget" data-type="tags"><div class="card-content"><div class="menu"><h3 class="menu-label">标签</h3><div class="field is-grouped is-grouped-multiline"><div class="control"><a class="tags has-addons" href="/tags/coding-matlab%E4%B8%8E%E5%9B%BE%E5%83%8F%E5%A4%84%E7%90%86/"><span class="tag">coding matlab与图像处理</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/plan/"><span class="tag">plan</span><span class="tag">13</span></a></div><div class="control"><a class="tags has-addons" href="/tags/python%E7%BC%96%E7%A8%8B%E6%80%9D%E8%80%83/"><span class="tag">python编程思考</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E4%BD%93%E8%83%BD%E9%94%BB%E7%82%BC/"><span class="tag">体能锻炼</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%9C%9F%E6%9C%A8/"><span class="tag">土木</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%AD%A6%E4%B9%A0%E6%96%B9%E6%B3%95/"><span class="tag">学习方法</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E5%B7%A5%E7%A8%8B%E6%B5%8B%E9%87%8F/"><span class="tag">工程测量</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%91%84%E5%BD%B1/"><span class="tag">摄影</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%94%BF%E6%B2%BB/"><span class="tag">政治</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%95%B0%E5%AD%A6-%E6%A6%82%E7%8E%87%E8%AE%BA%E4%B8%8E%E6%95%B0%E7%90%86%E7%BB%9F%E8%AE%A1/"><span class="tag">数学 概率论与数理统计</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E6%97%A5%E5%B8%B8%E9%9A%8F%E7%AC%94/"><span class="tag">日常随笔</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%A4%BE%E4%BC%9A%E5%AE%9E%E8%B7%B5/"><span class="tag">社会实践</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/"><span class="tag">线性代数</span><span class="tag">1</span></a></div><div class="control"><a class="tags has-addons" href="/tags/%E8%A7%82%E7%82%B9/"><span class="tag">观点</span><span class="tag">1</span></a></div></div></div></div></div><div class="column-right-shadow is-hidden-widescreen is-sticky"></div></div><div class="column column-right is-4-tablet is-4-desktop is-3-widescreen is-hidden-touch is-hidden-desktop-only order-3 is-sticky"><div class="card widget" data-type="recent-posts"><div class="card-content"><h3 class="menu-label">最新文章</h3><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-09T06:27:32.000Z">2020-11-09</time></p><p class="title"><a href="/2020/11/09/matlab/">matlab(复制粘贴，还未排版)</a></p><p class="categories"><a href="/categories/%E7%BC%96%E7%A8%8B-matlab/">编程 matlab</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-08T13:40:13.124Z">2020-11-08</time></p><p class="title"><a href="/2020/11/08/027%20%5B%E5%B7%A5%E7%A8%8B%E7%AE%A1%E7%90%86%5D%E5%B7%A5%E7%A8%8B%E6%B5%8B%E9%87%8F/">从工程测量的课程学习到几何直观记录</a></p><p class="categories"><a href="/categories/%E7%90%86%E8%AE%BA-%E5%B7%A5%E7%A8%8B%E6%8A%80%E6%9C%AF/">理论 工程技术</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-08T13:40:13.115Z">2020-11-08</time></p><p class="title"><a href="/2020/11/08/018%20%E7%AE%A1%E7%90%86%E5%AD%A6%E6%80%BB%E7%BB%93/">管理学</a></p><p class="categories"><a href="/categories/%E6%8A%80%E6%9C%AF-%E5%9F%BA%E7%A1%80%E5%AD%A6%E7%A7%91/">技术 基础学科</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-08T13:40:13.111Z">2020-11-08</time></p><p class="title"><a href="/2020/11/08/014%20%E6%91%84%E5%BD%B1%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/">我的摄影的学习之旅</a></p><p class="categories"><a href="/categories/%E7%94%9F%E6%B4%BB-%E9%98%85%E8%AF%BB/">生活 阅读</a></p></div></article><article class="media"><div class="media-content"><p class="date"><time dateTime="2020-11-08T13:40:13.110Z">2020-11-08</time></p><p class="title"><a href="/2020/11/08/013%20%E7%BA%BF%E6%80%A7%E4%BB%A3%E6%95%B0/">线性代数学习与提升</a></p><p class="categories"><a href="/categories/%E7%90%86%E8%AE%BA-%E5%B7%A5%E7%A8%8B%E6%8A%80%E6%9C%AF/">理论 工程技术</a></p></div></article></div></div></div></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/">修炼理工解构的能力</a><p class="is-size-7"><span>&copy; 2020 Lider</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/cookieconsent@3.1.1/build/cookieconsent.min.js" defer></script><script>window.addEventListener("load", () => {
      window.cookieconsent.initialise({
        type: "info",
        theme: "edgeless",
        static: false,
        position: "bottom-left",
        content: {
          message: "此网站使用Cookie来改善您的体验。",
          dismiss: "知道了！",
          allow: "允许使用Cookie",
          deny: "拒绝",
          link: "了解更多",
          policy: "Cookie政策",
          href: "https://www.cookiesandyou.com/",
        },
        palette: {
          popup: {
            background: "#edeff5",
            text: "#838391"
          },
          button: {
            background: "#4b81e8"
          },
        },
      });
    });</script><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>